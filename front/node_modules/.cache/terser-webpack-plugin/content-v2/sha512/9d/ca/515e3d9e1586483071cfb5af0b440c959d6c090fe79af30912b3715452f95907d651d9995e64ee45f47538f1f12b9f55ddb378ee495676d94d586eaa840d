{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-51998a77\"],{\"0070\":function(e,t,r){},\"23ba\":function(e,t,r){\"use strict\";r.d(t,\"d\",(function(){return o})),r.d(t,\"c\",(function(){return a})),r.d(t,\"f\",(function(){return s})),r.d(t,\"e\",(function(){return i})),r.d(t,\"b\",(function(){return l})),r.d(t,\"a\",(function(){return c}));var n=r(\"b775\");function o(e){return Object(n[\"a\"])({url:\"/group/list\",method:\"get\",data:e})}function a(e){return Object(n[\"a\"])({url:\"/group/add\",method:\"post\",data:e})}function s(e){return Object(n[\"a\"])({url:\"/group/update\",method:\"post\",data:e})}function i(e){return console.log(e),Object(n[\"a\"])({url:\"/group/test_connection\",method:\"post\",data:e})}function l(e){return console.log(e),Object(n[\"a\"])({url:\"/group/get_config_from_db\",method:\"post\",data:e})}function c(e){return console.log(e),Object(n[\"a\"])({url:\"/group/export_config_to_db\",method:\"post\",data:e})}},3204:function(e,t,r){\"use strict\";r(\"0070\")},5643:function(e,t,r){e.exports=r.p+\"static/img/tanchishe-icon.814d2184.png\"},\"90fe\":function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"app-container\"},[r(\"el-tabs\",{attrs:{type:\"border-card\"}},[r(\"el-tab-pane\",{attrs:{label:\"配置列表\"}},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.handleAddExcel}},[e._v(\"新增表格\")]),r(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"30px\"},attrs:{data:e.list,\"element-loading-text\":\"Loading\",border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[r(\"el-table-column\",{attrs:{label:\"名称\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-link\",{attrs:{href:\"#/config/excel/\"+t.row.name+\"/\"+t.row.id,type:\"primary\"}},[e._v(e._s(t.row.name))])]}}])}),r(\"el-table-column\",{attrs:{label:\"创建者\",align:\"center\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"span\",[e._v(e._s(t.row.owner))])]}}])}),r(\"el-table-column\",{attrs:{label:\"备注\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s(t.row.remark)+\" \")]}}])}),r(\"el-table-column\",{attrs:{label:\"创建时间\",width:\"210\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s(e._f(\"dateFilter\")(t.row.createTime))+\" \")]}}])}),r(\"el-table-column\",{attrs:{label:\"编辑时间\",width:\"210\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s(e._f(\"dateFilter\")(t.row.editTime))+\" \")]}}])}),r(\"el-table-column\",{attrs:{\"class-name\":\"status-col\",label:\"操作\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(r){return e.handleEdit(t)}}},[e._v(\"编辑\")]),r(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(r){return e.handleExport(t)}}},[e._v(\"导表\")]),r(\"el-button\",{attrs:{type:\"danger\",size:\"small\"},on:{click:function(r){return e.handleDelete(t)}}},[e._v(\"删除\")])]}}])})],1),r(\"el-dialog\",{attrs:{visible:e.dialogVisible,title:\"edit\"===e.dialogType?\"编辑Excel信息\":\"新增Excel\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[r(\"el-form\",{attrs:{model:e.excel,\"label-width\":\"80px\",\"label-position\":\"left\"}},[r(\"el-form-item\",{attrs:{label:\"名称\"}},[r(\"el-input\",{attrs:{placeholder:\"名称\",disabled:\"edit\"===e.dialogType},model:{value:e.excel.name,callback:function(t){e.$set(e.excel,\"name\",t)},expression:\"excel.name\"}})],1),r(\"el-form-item\",{attrs:{label:\"备注\"}},[r(\"el-input\",{attrs:{autosize:{minRows:2,maxRows:4},type:\"textarea\",placeholder:\"备注\"},model:{value:e.excel.remark,callback:function(t){e.$set(e.excel,\"remark\",t)},expression:\"excel.remark\"}})],1),r(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"edit\"===e.dialogType,expression:\"dialogType==='edit'\"}],attrs:{label:\"创建者\"}},[r(\"el-input\",{attrs:{placeholder:\"创建者\",disabled:\"\"},model:{value:e.excel.owner,callback:function(t){e.$set(e.excel,\"owner\",t)},expression:\"excel.owner\"}})],1)],1),r(\"div\",{staticStyle:{\"text-align\":\"right\"}},[r(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.confirmExcel}},[e._v(\"保存\")])],1)],1),r(\"el-dialog\",{attrs:{visible:e.exportDialogVisible,title:\"导出表格内容\",width:\"80%\"},on:{\"update:visible\":function(t){e.exportDialogVisible=t}}},[r(\"el-form\",{attrs:{model:e.excel,\"label-width\":\"80px\",\"label-position\":\"left\"}},[r(\"el-form-item\",{attrs:{label:\"选择表格\"}},[r(\"el-radio-group\",{on:{change:e.onSelectedSheetChange},model:{value:e.sleectedSheet,callback:function(t){e.sleectedSheet=t},expression:\"sleectedSheet\"}},e._l(e.sheetList,(function(t){return r(\"el-radio\",{key:t,attrs:{label:t}},[e._v(e._s(t)+\" \")])})),1)],1),r(\"div\",[r(\"code-diff\",{attrs:{\"old-string\":e.oldStr,\"new-string\":e.newStr,isShowNoChange:!0,renderNothingWhenEmpty:!0,outputFormat:\"side-by-side\",context:1e3}})],1)],1),r(\"div\",{staticStyle:{\"text-align\":\"right\"}},[r(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.exportDialogVisible=!1}}},[e._v(\"取消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.confirmExport}},[e._v(\"确定\")])],1)],1)],1),r(\"el-tab-pane\",{attrs:{label:\"项目配置\"}},[r(\"el-form\",{ref:\"form\",attrs:{model:e.groupInfo,\"label-width\":\"120px\"}},[r(\"el-form-item\",{attrs:{label:\"名称\"}},[r(\"el-input\",{attrs:{value:\"贪吃蛇大作战\"},model:{value:e.groupInfo.name,callback:function(t){e.$set(e.groupInfo,\"name\",t)},expression:\"groupInfo.name\"}})],1),r(\"el-form-item\",{attrs:{label:\"头像\"}},[r(\"el-col\",{attrs:{span:11}},[r(\"img\",{attrs:{id:\"group-icon\",src:e.groupInfo.avatar,alt:\"\"}}),r(\"input\",{staticClass:\"avatar-input\",attrs:{type:\"file\",accept:\"image/*\",name:\"avatar\"},on:{change:e.uploadAvatar}})])],1),r(\"br\"),r(\"el-form-item\",{attrs:{label:\"备注\"}},[r(\"el-input\",{attrs:{type:\"textarea\"},model:{value:e.groupInfo.remark,callback:function(t){e.$set(e.groupInfo,\"remark\",t)},expression:\"groupInfo.remark\"}})],1),r(\"el-form-item\",{attrs:{label:\"数据仓库\"}},[r(\"el-checkbox-group\",{staticStyle:{padding:\"5px 15px\"},model:{value:e.groupInfo.store,callback:function(t){e.$set(e.groupInfo,\"store\",t)},expression:\"groupInfo.store\"}},e._l(e.storeOptions,(function(t){return r(\"el-checkbox\",{key:t.key,attrs:{label:t.key}},[e._v(\" \"+e._s(t.name)+\" \")])})),1)],1),r(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.inArray(e.groupInfo.store,1),expression:\"inArray(groupInfo.store, 1)\"}],staticClass:\"store-group\",attrs:{label:\"Redis配置\"}},[r(\"el-form-item\",{attrs:{label:\"RedisDSN\"}},[r(\"el-input\",{attrs:{name:\"RedisDSN\",type:\"text\",placeholder:\"172.2.1.88:6379\"},model:{value:e.groupInfo.RedisDSN,callback:function(t){e.$set(e.groupInfo,\"RedisDSN\",t)},expression:\"groupInfo.RedisDSN\"}})],1),r(\"el-form-item\",{attrs:{label:\"密码\"}},[r(\"el-input\",{attrs:{name:\"RedisPassword\",\"auto-complete\":\"new-password\",type:\"password\",placeholder:\"password\"},model:{value:e.groupInfo.RedisPassword,callback:function(t){e.$set(e.groupInfo,\"RedisPassword\",t)},expression:\"groupInfo.RedisPassword\"}})],1),r(\"el-form-item\",{attrs:{label:\"KeyPrefix\"}},[r(\"el-input\",{attrs:{type:\"text\",placeholder:\"key prefix 可不填\"},model:{value:e.groupInfo.RedisKeyPrefix,callback:function(t){e.$set(e.groupInfo,\"RedisKeyPrefix\",t)},expression:\"groupInfo.RedisKeyPrefix\"}})],1),r(\"el-tag\",{staticStyle:{\"margin-left\":\"40px\"},attrs:{type:\"danger\"}},[e._v(\" 应用可以通过订阅redis的channel：\"+e._s(e.groupInfo.RedisKeyPrefix)+\"config_refresh 获取配置更新的通知，message为更新的表名 \")]),r(\"el-form-item\",{attrs:{label:\" \"}},[r(\"el-button\",{attrs:{type:\"success\"},on:{click:e.testRedisConnection}},[e._v(\"测试连通性\")])],1)],1),r(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.inArray(e.groupInfo.store,2),expression:\"inArray(groupInfo.store, 2)\"}],staticClass:\"store-group\",attrs:{label:\"Mysql配置\"}},[r(\"el-form-item\",{attrs:{label:\"MysqlDSN\"}},[r(\"el-input\",{attrs:{type:\"text\",placeholder:\"username:password@tcp(172.2.1.88:3306)/dbname?charset=utf8mb4\"},model:{value:e.groupInfo.MysqlDSN,callback:function(t){e.$set(e.groupInfo,\"MysqlDSN\",t)},expression:\"groupInfo.MysqlDSN\"}})],1),r(\"el-form-item\",{attrs:{label:\" \"}},[r(\"el-button\",{attrs:{type:\"success\"},on:{click:e.testMysqlConnection}},[e._v(\"测试连通性\")])],1)],1),r(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.inArray(e.groupInfo.store,3),expression:\"inArray(groupInfo.store, 3)\"}],staticClass:\"store-group\",attrs:{label:\"Mongodb配置\"}},[r(\"el-form-item\",{attrs:{label:\"MongodbDSN\"}},[r(\"el-input\",{attrs:{type:\"text\",placeholder:\"mongodb://username:password@127.0.0.1:27017/?authSource=dbname\"},model:{value:e.groupInfo.MongodbDSN,callback:function(t){e.$set(e.groupInfo,\"MongodbDSN\",t)},expression:\"groupInfo.MongodbDSN\"}})],1),r(\"el-form-item\",{attrs:{label:\" \"}},[r(\"el-button\",{attrs:{type:\"success\"},on:{click:e.testMongodbConnection}},[e._v(\"测试连通性\")])],1)],1),r(\"el-form-item\",[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveGroupConfig}},[e._v(\"保存\")])],1)],1)],1),r(\"el-tab-pane\",{attrs:{label:\"项目成员\"}},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.handleAddMember}},[e._v(\"添加成员\")]),r(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"30px\"},attrs:{data:e.groupInfo.members,\"element-loading-text\":\"Loading\",border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[r(\"el-table-column\",{attrs:{label:\"昵称\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"span\",[e._v(e._s(t.row.userName))])]}}])}),r(\"el-table-column\",{attrs:{\"class-name\":\"status-col\",label:\"操作\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showDeleteMember(t),expression:\"showDeleteMember(scope)\"}],attrs:{type:\"danger\",size:\"small\"},on:{click:function(r){return e.handleDeleteMember(t)}}},[e._v(\"删除\")]),r(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.groupInfo.owner==t.row.uid,expression:\"groupInfo.owner == scope.row.uid\"}]},[e._v(\"管理员\")])]}}])})],1),r(\"el-dialog\",{attrs:{visible:e.addMemberdialogVisible,title:\"添加成员\",width:\"500px\"},on:{\"update:visible\":function(t){e.addMemberdialogVisible=t}}},[r(\"el-form\",{attrs:{\"label-width\":\"80px\",\"label-position\":\"left\"}},[r(\"el-form-item\",{attrs:{label:\"名称\"}},[r(\"el-autocomplete\",{attrs:{\"fetch-suggestions\":e.querySearchAsync,placeholder:\"请输入名称:\",clearable:\"\",\"trigger-on-focus\":!1},on:{select:e.handleSelect},model:{value:e.searchUserName,callback:function(t){e.searchUserName=t},expression:\"searchUserName\"}})],1)],1),r(\"br\"),r(\"div\",{staticStyle:{\"text-align\":\"right\"}},[r(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.addMemberdialogVisible=!1}}},[e._v(\"取消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addMember()}}},[e._v(\"保存\")])],1)],1)],1)],1),r(\"el-dialog\",{attrs:{visible:e.compareVisable,title:\"修改比对(左边为修改前，右边为修改后)\",width:\"80%\"},on:{\"update:visible\":function(t){e.compareVisable=t}}},[r(\"div\",[r(\"code-diff\",{attrs:{\"old-string\":e.oldStr,\"new-string\":e.newStr,outputFormat:\"side-by-side\",context:20}})],1)])],1)},o=[],a=(r(\"99af\"),r(\"4160\"),r(\"c975\"),r(\"a434\"),r(\"b0c0\"),r(\"ac1f\"),r(\"5319\"),r(\"159b\"),r(\"96cf\"),r(\"1da1\")),s=r(\"5530\"),i=r(\"b775\");function l(e){return Object(i[\"a\"])({url:\"/excel/list\",method:\"get\",params:e})}function c(e){return Object(i[\"a\"])({url:\"/excel/delete\",method:\"post\",params:e})}function u(e){return Object(i[\"a\"])({url:\"/excel/create\",method:\"post\",params:e})}function d(e){return Object(i[\"a\"])({url:\"/excel/update\",method:\"post\",params:e})}function p(e){return Object(i[\"a\"])({url:\"/excel/sheet_list\",method:\"post\",params:e})}function f(e){return Object(i[\"a\"])({url:\"/excel/export\",method:\"post\",params:e})}var g=r(\"c24f\"),m=r(\"23ba\"),h=r(\"2f62\"),b=(r(\"b64b\"),r(\"d3b7\"),r(\"4d63\"),r(\"25f0\"),r(\"4d90\"),r(\"1276\"),r(\"53ca\"));function y(e){if(!e&&\"object\"!==Object(b[\"a\"])(e))throw new Error(\"error arguments\",\"deepClone\");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(r){e[r]&&\"object\"===Object(b[\"a\"])(e[r])?t[r]=y(e[r]):t[r]=e[r]})),t}var x=r(\"4eff\"),v=r.n(x),w={id:\"\",name:\"\",owner:\"\",remark:\"\",create_time:\"\",update_time:\"\"},S={components:{CodeDiff:v.a},computed:Object(s[\"a\"])({},Object(h[\"b\"])([\"uid\",\"name\"])),filters:{statusFilter:function(e){var t={published:\"success\",draft:\"gray\",deleted:\"danger\"};return t[e]},dateFilter:function(e){return new Date(1e3*parseInt(e)).toLocaleString().replace(/:\\d{1,2}$/,\" \")}},data:function(){return{excel:Object.assign({},w),list:[],listLoading:!0,dialogVisible:!1,dialogType:\"new\",exportDialogVisible:!1,exportFormat:\"\",form:{},groupInfo:{name:\"贪吃蛇大作战\",remark:\"这是贪吃蛇大作战App项目\",avatar:r(\"5643\"),store:[]},storeOptions:[{key:1,name:\"Redis\"},{key:2,name:\"Mysql\"}],addMemberdialogVisible:!1,searchUserName:\"\",searchUid:\"\",compareVisable:!1,oldStr:\"\",newStr:\"\",sheetList:[],sleectedSheet:\"\"}},created:function(){this.excel.owner=this.name,this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0;var t=localStorage.getItem(\"groupInfo\");t=JSON.parse(t),console.log(t),null!=t?(void 0!=t.store&&null!=t.store||(t.store=[]),this.groupInfo=t,l({limit:10,group_id:t.gid}).then((function(t){void 0!=t.data.list&&(e.list=t.data.list),e.listLoading=!1}))):this.$router.push({path:\"/\"})},handleAddExcel:function(){this.excel=Object.assign({},w),this.excel.owner=this.name,this.dialogType=\"new\",this.dialogVisible=!0},confirmExcel:function(){var e=this;return Object(a[\"a\"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s,i,l,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=\"edit\"===e.dialogType,!r){t.next=14;break}return t.next=4,d(e.excel);case 4:n=0;case 5:if(!(n<e.list.length)){t.next=12;break}if(e.list[n].id!==e.excel.id){t.next=9;break}return e.list.splice(n,1,Object.assign({},e.excel)),t.abrupt(\"break\",12);case 9:n++,t.next=5;break;case 12:t.next=26;break;case 14:return o=e.excel,o.uid=e.uid,o.group_id=e.groupInfo.gid,t.next=19,u(o);case 19:a=t.sent,s=a.data,e.excel.id=s.eid,i=(new Date).getTime(),e.excel.createTime=i/1e3,e.excel.editTime=i/1e3,e.list.push(e.excel);case 26:l=e.excel,l.id,c=l.name,p=l.remark,e.dialogVisible=!1,e.$notify({title:\"Success\",dangerouslyUseHTMLString:!0,message:\"\\n            <div>名称: \".concat(c,\"</div>\\n            <div>备注: \").concat(p,\"</div>\\n          \"),type:\"success\"});case 29:case\"end\":return t.stop()}}),t)})))()},handleEdit:function(e){this.dialogType=\"edit\",this.dialogVisible=!0,this.checkStrictly=!0,this.excel=y(e.row)},handleDelete:function(e){var t=this,r=e.$index,n=e.row;this.$confirm(\"确定删除表格吗?\",\"Warning\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(Object(a[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c({id:n.id,name:n.name});case 2:t.list.splice(r,1),t.$message({type:\"success\",message:\"删除成功!\"});case 4:case\"end\":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},handleExport:function(e){var t=this;this.excel=y(e.row),this.exportDialogVisible=!0,this.sheetList=[],this.oldStr=\"\",this.newStr=\"\",p({gridKey:this.excel.id}).then((function(e){0==e.code&&(t.sheetList=e.data.sheetName,console.log(t.sheetList),t.sheetList.length>0&&(t.sleectedSheet=t.sheetList[0]),t.getExcelSheetContent(t.excel.id,t.sleectedSheet),t.getExcelSheetFromDB(t.excel.id,t.sleectedSheet))}))},getExcelSheetContent:function(e,t){var r=this;return Object(a[\"a\"])(regeneratorRuntime.mark((function n(){var o,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.newStr=\"\",o={},o.gridKey=e,o.sheetName=t,o.format=\"json\",n.next=7,f(o);case 7:a=n.sent,s=a.data,i=JSON.parse(s.jsonstr),r.newStr=JSON.stringify(i,null,\" \");case 11:case\"end\":return n.stop()}}),n)})))()},getExcelSheetFromDB:function(e,t){var r=this;return Object(a[\"a\"])(regeneratorRuntime.mark((function n(){var o,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.oldStr=\"\",o={},o.gridKey=e,o.sheetName=t,n.next=6,Object(m[\"b\"])(o);case 6:a=n.sent,s=a.data,void 0!=s.jsonstr&&s.jsonstr.length>0&&(i=JSON.parse(s.jsonstr),r.oldStr=JSON.stringify(i,null,\" \"));case 9:case\"end\":return n.stop()}}),n)})))()},onSelectedSheetChange:function(e){this.getExcelSheetContent(this.excel.id,this.sleectedSheet),this.getExcelSheetFromDB(this.excel.id,this.sleectedSheet)},confirmExport:function(){var e=this,t={};t.gridKey=this.excel.id,t.sheetName=this.sleectedSheet,Object(m[\"a\"])(t).then((function(t){0==t.code&&(0!=t.code?e.$notify({title:\"导表失败\",dangerouslyUseHTMLString:!0,message:t.data.msg,type:\"error\"}):(e.$notify({title:\"导表成功\",dangerouslyUseHTMLString:!0,message:\"\",type:\"success\"}),e.exportDialogVisible=!1))}))},saveGroupConfig:function(){var e=this;Object(m[\"f\"])({id:this.groupInfo.gid,groupInfo:this.groupInfo}).then((function(t){0!=t.code?e.$notify({title:\"保存失败\",dangerouslyUseHTMLString:!0,message:t.data.msg,type:\"error\"}):(e.$notify({title:\"保存成功\",dangerouslyUseHTMLString:!0,message:\"\",type:\"success\"}),localStorage.setItem(\"groupInfo\",JSON.stringify(e.groupInfo)))}))},uploadAvatar:function(e){e.preventDefault(),console.log(e);var t=e.target.files||e.dataTransfer.files;this.checkFile(t[0])&&this.setSourceImg(t[0])},checkFile:function(e){var t=this.lang,r=this.maxSize;return-1===e.type.indexOf(\"image\")?(this.hasError=!0,this.errorMsg=t.error.onlyImg,!1):!(e.size/1024>r)||(this.hasError=!0,this.errorMsg=t.error.outOfSize+r+\"kb\",!1)},setSourceImg:function(e){var t=this,r=new FileReader;r.onload=function(e){t.groupInfo.avatar=r.result},r.readAsDataURL(e)},inArray:function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},testRedisConnection:function(e){var t=this,r={dsnType:1,dsn:this.groupInfo.RedisDSN,pwd:this.groupInfo.RedisPassword};Object(m[\"e\"])(r).then((function(e){0!=e.data.connected&&void 0!=e.data.connected?t.$notify({title:\"Redis连接成功\",dangerouslyUseHTMLString:!0,message:\"\",type:\"success\"}):t.$notify({title:\"Redis连接失败\",dangerouslyUseHTMLString:!0,message:\"请检查DSN配置或者IP白名单配置\",type:\"error\"})}))},testMysqlConnection:function(){var e=this,t={dsnType:2,dsn:this.groupInfo.MysqlDSN};Object(m[\"e\"])(t).then((function(t){0!=t.data.connected&&void 0!=t.data.connected?e.$notify({title:\"Mysql连接成功\",dangerouslyUseHTMLString:!0,message:\"\",type:\"success\"}):e.$notify({title:\"Mysql连接失败\",dangerouslyUseHTMLString:!0,message:\"请检查DSN配置或者IP白名单配置\",type:\"error\"})}))},testMongodbConnection:function(){var e=this,t={dsnType:3,dsn:this.groupInfo.MongodbDSN};Object(m[\"e\"])(t).then((function(t){0!=t.data.connected&&void 0!=t.data.connected?e.$notify({title:\"Mongodb连接成功\",dangerouslyUseHTMLString:!0,message:\"\",type:\"success\"}):e.$notify({title:\"Mongodb连接失败\",dangerouslyUseHTMLString:!0,message:\"请检查DSN配置或者IP白名单配置\",type:\"error\"})}))},showDeleteMember:function(e){return this.groupInfo.owner==this.uid&&this.groupInfo.owner!=e.row.uid},handleAddMember:function(){this.addMemberdialogVisible=!0},addMember:function(){var e=this,t=!1;this.groupInfo.members.forEach((function(r){r.uid!=e.searchUid||(t=!0)})),t?this.$notify({title:\"添加失败\",dangerouslyUseHTMLString:!0,message:\"成员已存在\",type:\"error\"}):(this.groupInfo.members.push({uid:this.searchUid,userName:this.searchUserName}),this.updateGroupInfo(\"保存成功\",\"添加成员：\"+this.searchUserName),this.addMemberdialogVisible=!1)},handleSelect:function(e){this.searchUid=e.id},handleDeleteMember:function(e){var t=[];this.groupInfo.members.forEach((function(r){r.uid!=e.row.uid&&t.push(r)})),this.groupInfo.members=t,this.updateGroupInfo(\"保存成功\",\"删除成员：\"+e.row.userName)},updateGroupInfo:function(e,t){var r=this;Object(m[\"f\"])({id:this.groupInfo.gid,groupInfo:this.groupInfo}).then((function(n){0!=n.code?r.$notify({title:\"保存失败\",dangerouslyUseHTMLString:!0,message:n.data.msg,type:\"error\"}):(r.$notify({title:e,dangerouslyUseHTMLString:!0,message:t,type:\"success\"}),localStorage.setItem(\"groupInfo\",JSON.stringify(r.groupInfo)))}))},querySearchAsync:function(e,t){var r=[];this.searchUid=\"\",\"\"!=e?Object(g[\"e\"])({name:this.searchUserName}).then((function(e){void 0!=e.data.userInfos&&null!=e.data.userInfos?(e.data.userInfos.forEach((function(e){r.push({id:e.uid,value:e.userName})})),console.log(r),t(r)):t(r)})):t(r)}}},I=S,k=(r(\"3204\"),r(\"2877\")),_=Object(k[\"a\"])(I,n,o,!1,null,\"2b0f35ae\",null);t[\"default\"]=_.exports}}]);","extractedComments":[]}