{"remainingRequest":"/Users/Fandy/workspace/e2c/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Fandy/workspace/e2c/front/src/views/table/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Fandy/workspace/e2c/front/src/views/table/index.vue","mtime":1614139208847},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldExpc3QsIGRlbGV0ZUV4Y2VsLCB1cGRhdGVFeGNlbCwgYWRkRXhjZWwsIGV4cG9ydEV4Y2VsIH0gZnJvbSAnQC9hcGkvc2hlZXQnCmltcG9ydCB7IHNlYXJjaFVzZXIgfSBmcm9tICdAL2FwaS91c2VyJwppbXBvcnQgeyBncm91cFVwZGF0ZSwgZ3JvdXBUZXN0Q29ubmVjdGlvbiB9IGZyb20gJ0AvYXBpL2dyb3VwJwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgZGVlcENsb25lIH0gZnJvbSAnQC91dGlscycKCmNvbnN0IGRlZmF1bHRFeGNlbCA9IHsKICBpZDogJycsCiAgbmFtZTogJycsCiAgb3duZXI6ICcnLAogIHJlbWFyazogJycsCiAgY3JlYXRlX3RpbWU6ICcnLAogIHVwZGF0ZV90aW1lOiAnJywKfQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ3VpZCcsCiAgICAgICduYW1lJwogICAgXSkKICB9LAogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcihzdGF0dXMpIHsKICAgICAgY29uc3Qgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnZ3JheScsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfQogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c10KICAgIH0sCiAgICBkYXRlRmlsdGVyKGRhdGV0aW1lKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUludChkYXRldGltZSkgKiAxMDAwKS50b0xvY2FsZVN0cmluZygpLnJlcGxhY2UoLzpcZHsxLDJ9JC8sJyAnKTsKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBleGNlbDogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEV4Y2VsKSwKICAgICAgbGlzdDogW10sCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVHlwZTogJ25ldycsCiAgICAgIGV4cG9ydERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBleHBvcnRGb3JtYXQ6ICcnLAogICAgICBmb3JtOiB7fSwKICAgICAgZ3JvdXBJbmZvOiB7CiAgICAgICAgbmFtZTogIui0quWQg+ibh+Wkp+S9nOaImCIsCiAgICAgICAgcmVtYXJrOiAi6L+Z5piv6LSq5ZCD6JuH5aSn5L2c5oiYQXBw6aG555uuIiwKICAgICAgICBhdmF0YXI6IHJlcXVpcmUoIi4uLy4uL2ljb25zL3RhbmNoaXNoZS1pY29uLnBuZyIpLAogICAgICAgIHN0b3JlOiBbJ1JlZGlzJ10sCiAgICAgIH0sCiAgICAgIHN0b3JlT3B0aW9uczogWwogICAgICAgIHtrZXk6ICJSZWRpcyIsIG5hbWU6ICJSZWRpcyJ9LAogICAgICAgIHtrZXk6ICJNeXNxbCIsIG5hbWU6ICJNeXNxbCJ9LAogICAgICAgIHtrZXk6ICJNb25nb2RiIiwgbmFtZTogIk1vbmdvZGIifSwKICAgICAgXSwKICAgICAgYWRkTWVtYmVyZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlYXJjaFVzZXJOYW1lOiAiIiwKICAgICAgc2VhcmNoVWlkOiAiIgogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZXhjZWwub3duZXIgPSB0aGlzLm5hbWUKICAgIHRoaXMuZmV0Y2hEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YSgpIHsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUKICAgICAgdmFyIGdyb3VwSW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJncm91cEluZm8iKQogICAgICBncm91cEluZm8gPSBKU09OLnBhcnNlKGdyb3VwSW5mbykKICAgICAgY29uc29sZS5sb2coZ3JvdXBJbmZvKQogICAgICBpZiAoZ3JvdXBJbmZvID09IG51bGwpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiLyIKICAgICAgICB9KQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmIChncm91cEluZm8uc3RvcmUgPT0gdW5kZWZpbmVkIHx8IGdyb3VwSW5mby5zdG9yZSA9PSBudWxsKSB7CiAgICAgICAgZ3JvdXBJbmZvLnN0b3JlID0gWydSZWRpcyddCiAgICAgIH0KICAgICAgdGhpcy5ncm91cEluZm8gPSBncm91cEluZm8KICAgICAgZ2V0TGlzdCh7bGltaXQ6IDEwLCBncm91cF9pZDogZ3JvdXBJbmZvLmdpZH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxpc3QgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3QKICAgICAgICB9CiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQWRkRXhjZWwoKSB7CiAgICAgIHRoaXMuZXhjZWwgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0RXhjZWwpLAogICAgICB0aGlzLmV4Y2VsLm93bmVyID0gdGhpcy5uYW1lCiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICduZXcnCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBhc3luYyBjb25maXJtRXhjZWwoKSB7CiAgICAgIGNvbnN0IGlzRWRpdCA9IHRoaXMuZGlhbG9nVHlwZSA9PT0gJ2VkaXQnCiAgICAgIGlmIChpc0VkaXQpIHsKICAgICAgICBhd2FpdCB1cGRhdGVFeGNlbCh0aGlzLmV4Y2VsKQogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICBpZiAodGhpcy5saXN0W2luZGV4XS5pZCA9PT0gdGhpcy5leGNlbC5pZCkgewogICAgICAgICAgICB0aGlzLmxpc3Quc3BsaWNlKGluZGV4LCAxLCBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmV4Y2VsKSkKICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuZXhjZWwKICAgICAgICBwYXJhbXMudWlkID0gdGhpcy51aWQKICAgICAgICBwYXJhbXMuZ3JvdXBfaWQgPSB0aGlzLmdyb3VwSW5mby5naWQKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFkZEV4Y2VsKHBhcmFtcykKICAgICAgICB0aGlzLmV4Y2VsLmlkID0gZGF0YS5laWQKICAgICAgICB2YXIgdGltZXN0YW1wPW5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgdGhpcy5leGNlbC5jcmVhdGVUaW1lID0gdGltZXN0YW1wLzEwMDAKICAgICAgICB0aGlzLmV4Y2VsLmVkaXRUaW1lID0gdGltZXN0YW1wLzEwMDAKICAgICAgICB0aGlzLmxpc3QucHVzaCh0aGlzLmV4Y2VsKQogICAgICB9CgogICAgICBjb25zdCB7IGlkLCBuYW1lLCByZW1hcmsgfSA9IHRoaXMuZXhjZWwKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiBgCiAgICAgICAgICAgIDxkaXY+5ZCN56ewOiAke25hbWV9PC9kaXY+CiAgICAgICAgICAgIDxkaXY+5aSH5rOoOiAke3JlbWFya308L2Rpdj4KICAgICAgICAgIGAsCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRWRpdChzY29wZSkgewogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAnZWRpdCcKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmNoZWNrU3RyaWN0bHkgPSB0cnVlCiAgICAgIHRoaXMuZXhjZWwgPSBkZWVwQ2xvbmUoc2NvcGUucm93KQogICAgfSwKICAgIGhhbmRsZURlbGV0ZSh7JGluZGV4LCByb3d9KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuWIoOmZpOihqOagvOWQlz8nLCAnV2FybmluZycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pCiAgICAgIC50aGVuKGFzeW5jKCkgPT4gewogICAgICAgIGF3YWl0IGRlbGV0ZUV4Y2VsKHtpZDogcm93LmlkLCBuYW1lOiByb3cubmFtZX0pCiAgICAgICAgdGhpcy5saXN0LnNwbGljZSgkaW5kZXgsIDEpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICB9KQogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsgY29uc29sZS5lcnJvcihlcnIpIH0pCiAgICB9LAogICAgaGFuZGxlRXhwb3J0KHNjb3BlKSB7CiAgICAgIHRoaXMuZXhjZWwgPSBkZWVwQ2xvbmUoc2NvcGUucm93KQogICAgICB0aGlzLmV4cG9ydERpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgYXN5bmMgY29uZmlybUV4cG9ydCgpIHsKICAgICAgdmFyIHBhcmFtcyA9IHt9CiAgICAgIHBhcmFtcy5ncmlkS2V5ID0gdGhpcy5leGNlbC5pZAogICAgICBwYXJhbXMuZm9ybWF0ID0gdGhpcy5leHBvcnRGb3JtYXQKICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBleHBvcnRFeGNlbChwYXJhbXMpCiAgICB9LAogICAgc2F2ZUdyb3VwQ29uZmlnKCkgewogICAgICBncm91cFVwZGF0ZSh7aWQ6IHRoaXMuZ3JvdXBJbmZvLmdpZCwgZ3JvdXBJbmZvOiB0aGlzLmdyb3VwSW5mb30pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlICE9IDApIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5L+d5a2Y5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1zZywKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjmiJDlip8nLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZ3JvdXBJbmZvIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cEluZm8pKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICB1cGxvYWRBdmF0YXIoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgY29uc29sZS5sb2coZSkKICAgICAgY29uc3QgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlcwogICAgICBpZiAodGhpcy5jaGVja0ZpbGUoZmlsZXNbMF0pKSB7CiAgICAgICAgdGhpcy5zZXRTb3VyY2VJbWcoZmlsZXNbMF0pCiAgICAgIH0KICAgIH0sCiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgLy8g5qOA5rWL6YCJ5oup55qE5paH5Lu25piv5ZCm5ZCI6YCCCiAgICBjaGVja0ZpbGUoZmlsZSkgewogICAgICBjb25zdCB7IGxhbmcsIG1heFNpemUgfSA9IHRoaXMKICAgICAgLy8g5LuF6ZmQ5Zu+54mHCiAgICAgIGlmIChmaWxlLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA9PT0gLTEpIHsKICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZQogICAgICAgIHRoaXMuZXJyb3JNc2cgPSBsYW5nLmVycm9yLm9ubHlJbWcKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICAvLyDotoXlh7rlpKflsI8KICAgICAgaWYgKGZpbGUuc2l6ZSAvIDEwMjQgPiBtYXhTaXplKSB7CiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWUKICAgICAgICB0aGlzLmVycm9yTXNnID0gbGFuZy5lcnJvci5vdXRPZlNpemUgKyBtYXhTaXplICsgJ2tiJwogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9LAogICAgc2V0U291cmNlSW1nKGZpbGUpIHsKICAgICAgY29uc3QgZnIgPSBuZXcgRmlsZVJlYWRlcigpCiAgICAgIGZyLm9ubG9hZCA9IGUgPT4gewogICAgICAgIHRoaXMuZ3JvdXBJbmZvLmF2YXRhciA9IGZyLnJlc3VsdAogICAgICB9CiAgICAgIGZyLnJlYWRBc0RhdGFVUkwoZmlsZSkKICAgIH0sCiAgICBpbkFycmF5KGFyciwgdGFyZ2V0KSB7CiAgICAgIGZvciAodmFyIGkgaW4gYXJyKSB7CiAgICAgICAgaWYgKGFycltpXSA9PSB0YXJnZXQpIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKICAgIHRlc3RSZWRpc0Nvbm5lY3Rpb24oZSkgewogICAgICB2YXIgcGFyYW1zID0ge2RzblR5cGU6MSxkc246dGhpcy5ncm91cEluZm8uUmVkaXNEU04scHdkOnRoaXMuZ3JvdXBJbmZvLlJlZGlzUGFzc3dvcmR9CiAgICAgIGdyb3VwVGVzdENvbm5lY3Rpb24ocGFyYW1zKQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkID09IDAgfHwgcmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ1JlZGlz6L+e5o6l5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBg6K+35qOA5p+lRFNO6YWN572u5oiW6ICFSVDnmb3lkI3ljZXphY3nva5gLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnUmVkaXPov57mjqXmiJDlip8nLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IGBgLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHRlc3RNeXNxbENvbm5lY3Rpb24oKSB7CiAgICAgIHZhciBwYXJhbXMgPSB7ZHNuVHlwZToyLGRzbjp0aGlzLmdyb3VwSW5mby5NeXNxbERTTn0KICAgICAgZ3JvdXBUZXN0Q29ubmVjdGlvbihwYXJhbXMpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gMCB8fCByZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnTXlzcWzov57mjqXlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IGDor7fmo4Dmn6VEU07phY3nva7miJbogIVJUOeZveWQjeWNlemFjee9rmAsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdNeXNxbOi/nuaOpeaIkOWKnycsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYGAsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgdGVzdE1vbmdvZGJDb25uZWN0aW9uKCkgewogICAgICB2YXIgcGFyYW1zID0ge2RzblR5cGU6Myxkc246dGhpcy5ncm91cEluZm8uTW9uZ29kYkRTTn0KICAgICAgZ3JvdXBUZXN0Q29ubmVjdGlvbihwYXJhbXMpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gMCB8fCByZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnTW9uZ29kYui/nuaOpeWksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYOivt+ajgOafpURTTumFjee9ruaIluiAhUlQ55m95ZCN5Y2V6YWN572uYCwKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ01vbmdvZGLov57mjqXmiJDlip8nLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IGBgLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHNob3dEZWxldGVNZW1iZXIoc2NvcGUpIHsKICAgICAgaWYgKHRoaXMuZ3JvdXBJbmZvLm93bmVyID09IHRoaXMudWlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBJbmZvLm93bmVyICE9IHNjb3BlLnJvdy51aWQKICAgICAgfQogICAgICByZXR1cm4gZmFsc2UKICAgIH0sCiAgICBoYW5kbGVBZGRNZW1iZXIoKSB7CiAgICAgIHRoaXMuYWRkTWVtYmVyZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBhZGRNZW1iZXIoKSB7CiAgICAgIHZhciBleGlzdCA9IGZhbHNlCiAgICAgIHRoaXMuZ3JvdXBJbmZvLm1lbWJlcnMuZm9yRWFjaChtID0+IHsKICAgICAgICBpZiAobS51aWQgPT0gdGhpcy5zZWFyY2hVaWQpIHsKICAgICAgICAgIGV4aXN0ID0gdHJ1ZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9KQogICAgICBpZihleGlzdCkgewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5re75Yqg5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBg5oiQ5ZGY5bey5a2Y5ZyoYCwKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuZ3JvdXBJbmZvLm1lbWJlcnMucHVzaCh7CiAgICAgICAgdWlkOiB0aGlzLnNlYXJjaFVpZCwKICAgICAgICB1c2VyTmFtZTogdGhpcy5zZWFyY2hVc2VyTmFtZSwKICAgICAgfSkKICAgICAgdGhpcy51cGRhdGVHcm91cEluZm8oIuS/neWtmOaIkOWKnyIsICLmt7vliqDmiJDlkZjvvJoiK3RoaXMuc2VhcmNoVXNlck5hbWUpCiAgICAgIHRoaXMuYWRkTWVtYmVyZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlU2VsZWN0KGUpIHsKICAgICAgdGhpcy5zZWFyY2hVaWQgPSBlLmlkCiAgICB9LAogICAgaGFuZGxlRGVsZXRlTWVtYmVyKHNjb3BlKSB7CiAgICAgIHZhciBtZW1iZXJzID0gW10KICAgICAgdGhpcy5ncm91cEluZm8ubWVtYmVycy5mb3JFYWNoKCBtID0+IHsKICAgICAgICBpZiAobS51aWQgIT0gc2NvcGUucm93LnVpZCkgewogICAgICAgICAgbWVtYmVycy5wdXNoKG0pCiAgICAgICAgfQogICAgICB9KQogICAgICB0aGlzLmdyb3VwSW5mby5tZW1iZXJzID0gbWVtYmVycwogICAgICB0aGlzLnVwZGF0ZUdyb3VwSW5mbygi5L+d5a2Y5oiQ5YqfIiwgIuWIoOmZpOaIkOWRmO+8miIrc2NvcGUucm93LnVzZXJOYW1lKQogICAgfSwKICAgIHVwZGF0ZUdyb3VwSW5mbyhzdWNjVGl0bGUsIHN1c3NNc2cpIHsKICAgICAgZ3JvdXBVcGRhdGUoe2lkOiB0aGlzLmdyb3VwSW5mby5naWQsIGdyb3VwSW5mbzogdGhpcy5ncm91cEluZm99KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSAwKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ+S/neWtmOWksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tc2csCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiBzdWNjVGl0bGUsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogc3Vzc01zZywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImdyb3VwSW5mbyIsIEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBJbmZvKSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgcXVlcnlTZWFyY2hBc3luYyhxdWVyeVN0cmluZywgY2IpIHsKICAgICAgdmFyIHJlc3VsdHMgPSBbXQogICAgICB0aGlzLnNlYXJjaFVpZCA9ICIiCiAgICAgIGlmIChxdWVyeVN0cmluZyA9PSAiIikgewogICAgICAgIGNiKHJlc3VsdHMpOwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHNlYXJjaFVzZXIoe25hbWU6IHRoaXMuc2VhcmNoVXNlck5hbWV9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS51c2VySW5mb3MgPT0gdW5kZWZpbmVkIHx8IHJlc3BvbnNlLmRhdGEudXNlckluZm9zID09IG51bGwpIHsKICAgICAgICAgIGNiKHJlc3VsdHMpOwogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHJlc3BvbnNlLmRhdGEudXNlckluZm9zLmZvckVhY2godSA9PiB7CiAgICAgICAgICByZXN1bHRzLnB1c2goeyJpZCI6dS51aWQsICJ2YWx1ZSI6IHUudXNlck5hbWV9KQogICAgICAgIH0pCiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cykKICAgICAgICBjYihyZXN1bHRzKTsKICAgICAgfSkKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/table","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-tabs type=\"border-card\">\n      <el-tab-pane label=\"配置列表\">\n        <el-button type=\"primary\" @click=\"handleAddExcel\">新增表格</el-button>\n        <el-table\n          v-loading=\"listLoading\"\n          :data=\"list\"\n          element-loading-text=\"Loading\"\n          border\n          fit\n          highlight-current-row\n          style=\"width: 100%;margin-top:30px;\"\n        >\n          <!-- <el-table-column align=\"center\" label=\"ID\" width=\"210\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.id }}\n            </template>\n          </el-table-column> -->\n          <el-table-column label=\"名称\" width=\"150\">\n            <template slot-scope=\"scope\">\n                <el-link :href=\"'#/config/excel/' + scope.row.name + '/' + scope.row.id\"  type=\"primary\">{{ scope.row.name }}</el-link>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建者\"  align=\"center\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.owner }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"备注\"  align=\"center\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.remark }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" width=\"210\" align=\"center\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.createTime | dateFilter }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"编辑时间\" width=\"210\" align=\"center\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.editTime | dateFilter }}\n            </template>\n          </el-table-column>\n          <el-table-column class-name=\"status-col\" label=\"操作\" width=\"300\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope)\">编辑</el-button>\n              <el-button type=\"primary\" size=\"small\" @click=\"handleExport(scope)\">比对</el-button>\n              <el-button type=\"primary\" size=\"small\" @click=\"handleExport(scope)\">导表</el-button>\n              <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(scope)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <el-dialog :visible.sync=\"dialogVisible\" :title=\"dialogType==='edit'?'编辑Excel信息':'新增Excel'\">\n          <el-form :model=\"excel\" label-width=\"80px\" label-position=\"left\">\n            <el-form-item label=\"名称\">\n              <el-input v-model=\"excel.name\" placeholder=\"名称\" :disabled=\"dialogType==='edit'\" />\n            </el-form-item>\n            <el-form-item label=\"备注\">\n              <el-input\n                v-model=\"excel.remark\"\n                :autosize=\"{ minRows: 2, maxRows: 4}\"\n                type=\"textarea\"\n                placeholder=\"备注\"\n              />\n            </el-form-item>\n            <el-form-item label=\"创建者\" v-show=\"dialogType==='edit'\">\n              <el-input v-model=\"excel.owner\" placeholder=\"创建者\" disabled />\n            </el-form-item>\n          </el-form>\n          <div style=\"text-align:right;\">\n            <el-button type=\"danger\" @click=\"dialogVisible=false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"confirmExcel\">保存</el-button>\n          </div>\n        </el-dialog>\n\n        <el-dialog :visible.sync=\"exportDialogVisible\" title=\"导出表格内容\">\n          <el-form :model=\"excel\" label-width=\"80px\" label-position=\"left\">\n            <el-form-item label=\"格式\">\n              <el-radio-group v-model=\"exportFormat\">\n                <el-radio label=\"json\" checked />\n            </el-radio-group>\n            </el-form-item>\n          </el-form>\n          <div style=\"text-align:right;\">\n            <el-button type=\"danger\" @click=\"exportDialogVisible=false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"confirmExport\">导出</el-button>\n          </div>\n        </el-dialog>\n      </el-tab-pane>\n\n      \n      <el-tab-pane label=\"项目配置\">\n        <el-form ref=\"form\" :model=\"groupInfo\" label-width=\"120px\">\n          <el-form-item label=\"名称\">\n            <el-input v-model=\"groupInfo.name\" value=\"贪吃蛇大作战\" />\n          </el-form-item>\n          <el-form-item label=\"头像\">\n            <el-col :span=\"11\">\n              <img id=\"group-icon\" v-bind:src=\"groupInfo.avatar\" alt=\"\">\n              <input class=\"avatar-input\" type=\"file\" accept=\"image/*\" @change=\"uploadAvatar\" name=\"avatar\"   />\n            </el-col>\n          </el-form-item>\n          <br>\n          <el-form-item label=\"备注\">\n            <el-input v-model=\"groupInfo.remark\" type=\"textarea\" />\n          </el-form-item>\n          <el-form-item label=\"数据仓库\">\n            <el-checkbox-group v-model=\"groupInfo.store\" style=\"padding: 5px 15px;\">\n              <el-checkbox v-for=\"item in storeOptions\" :key=\"item.key\" :label=\"item.key\">\n                {{ item.name }}\n              </el-checkbox>\n            </el-checkbox-group>\n          </el-form-item>\n          <el-form-item v-show=\"inArray(groupInfo.store, 'Redis')\" label=\"Redis配置\" class=\"store-group\">\n            <el-form-item label=\"RedisDSN\">\n              <el-input v-model=\"groupInfo.RedisDSN\" type=\"text\" placeholder=\"172.2.1.88:6379\" />\n            </el-form-item>\n            <el-form-item label=\"密码\">\n              <el-input v-model=\"groupInfo.RedisPassword\" type=\"password\" placeholder=\"password\" />\n            </el-form-item>\n            <el-form-item label=\"KeyPrefix\">\n              <el-input v-model=\"groupInfo.RedisKeyPrefix\" type=\"text\" placeholder=\"key prefix 可不填\" />\n            </el-form-item>\n            <el-tag type=\"danger\" style=\"margin-left: 40px;\" >\n              应用可以通过订阅redis的channel：{{groupInfo.RedisKeyPrefix}}config_refresh 获取配置更新的通知，message为更新的表名\n            </el-tag>\n            <el-form-item label=\" \">\n              <el-button type=\"success\" @click=\"testRedisConnection\">测试连通性</el-button>\n            </el-form-item>\n          </el-form-item>\n          <el-form-item v-show=\"inArray(groupInfo.store, 'Mysql')\" label=\"Mysql配置\" class=\"store-group\">\n            <el-form-item label=\"MysqlDSN\">\n              <el-input v-model=\"groupInfo.MysqlDSN\" type=\"text\" placeholder=\"username:password@tcp(172.2.1.88:3306)/dbname?charset=utf8mb4\" />\n            </el-form-item>\n            <el-form-item label=\" \">\n              <el-button type=\"success\" @click=\"testMysqlConnection\">测试连通性</el-button>\n            </el-form-item>\n          </el-form-item>\n\n          <el-form-item v-show=\"inArray(groupInfo.store, 'Mongodb')\" label=\"Mongodb配置\" class=\"store-group\">\n            <el-form-item label=\"MongodbDSN\">\n              <el-input v-model=\"groupInfo.MongodbDSN\" type=\"text\" placeholder=\"mongodb://username:password@127.0.0.1:27017/?authSource=dbname\" />\n            </el-form-item>\n            <el-form-item label=\" \">\n              <el-button type=\"success\" @click=\"testMongodbConnection\">测试连通性</el-button>\n            </el-form-item>\n          </el-form-item>\n         \n          <el-form-item>\n            <el-button type=\"primary\" @click=\"saveGroupConfig\">保存</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane label=\"项目成员\">\n        <el-button type=\"primary\" @click=\"handleAddMember\">添加成员</el-button>\n        <el-table\n          v-loading=\"listLoading\"\n          :data=\"groupInfo.members\"\n          element-loading-text=\"Loading\"\n          border\n          fit\n          highlight-current-row\n          style=\"width: 100%;margin-top:30px;\"\n        >\n        <!-- <el-table-column label=\"头像\"  align=\"center\" >\n            <template slot-scope=\"scope\">\n              <img :src=\"scope.row.avatar\" style=\"width:60px;border-radius:50%;\" alt=\"\">\n            </template>\n          </el-table-column> -->\n          <el-table-column label=\"昵称\"  align=\"center\" >\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.userName }}</span>\n            </template>\n          </el-table-column>\n          \n          <el-table-column class-name=\"status-col\" label=\"操作\" width=\"300\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <el-button v-show=\"showDeleteMember(scope)\" type=\"danger\" size=\"small\" @click=\"handleDeleteMember(scope)\">删除</el-button>\n              <el-tag v-show=\"groupInfo.owner == scope.row.uid\">管理员</el-tag>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <el-dialog :visible.sync=\"addMemberdialogVisible\" title=\"添加成员\" width=\"500px\">\n          <el-form label-width=\"80px\" label-position=\"left\">\n            <el-form-item label=\"名称\">\n              <el-autocomplete\n                v-model=\"searchUserName\"\n                :fetch-suggestions=\"querySearchAsync\"\n                placeholder=\"请输入名称:\"\n                clearable\n                :trigger-on-focus=\"false\"\n                @select=\"handleSelect\"\n              ></el-autocomplete>\n            </el-form-item>\n          </el-form>\n          <br>\n          <div style=\"text-align:right;\">\n            <el-button type=\"danger\" @click=\"addMemberdialogVisible=false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"addMember()\">保存</el-button>\n          </div>\n        </el-dialog>\n      </el-tab-pane>\n    </el-tabs>\n\n  </div>\n</template>\n\n<script>\nimport { getList, deleteExcel, updateExcel, addExcel, exportExcel } from '@/api/sheet'\nimport { searchUser } from '@/api/user'\nimport { groupUpdate, groupTestConnection } from '@/api/group'\nimport { mapGetters } from 'vuex'\nimport { deepClone } from '@/utils'\n\nconst defaultExcel = {\n  id: '',\n  name: '',\n  owner: '',\n  remark: '',\n  create_time: '',\n  update_time: '',\n}\n\nexport default {\n  computed: {\n    ...mapGetters([\n      'uid',\n      'name'\n    ])\n  },\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    },\n    dateFilter(datetime) {\n      return new Date(parseInt(datetime) * 1000).toLocaleString().replace(/:\\d{1,2}$/,' ');\n    }\n  },\n  data() {\n    return {\n      excel: Object.assign({}, defaultExcel),\n      list: [],\n      listLoading: true,\n      dialogVisible: false,\n      dialogType: 'new',\n      exportDialogVisible: false,\n      exportFormat: '',\n      form: {},\n      groupInfo: {\n        name: \"贪吃蛇大作战\",\n        remark: \"这是贪吃蛇大作战App项目\",\n        avatar: require(\"../../icons/tanchishe-icon.png\"),\n        store: ['Redis'],\n      },\n      storeOptions: [\n        {key: \"Redis\", name: \"Redis\"},\n        {key: \"Mysql\", name: \"Mysql\"},\n        {key: \"Mongodb\", name: \"Mongodb\"},\n      ],\n      addMemberdialogVisible: false,\n      searchUserName: \"\",\n      searchUid: \"\"\n    }\n  },\n  created() {\n    this.excel.owner = this.name\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      var groupInfo = localStorage.getItem(\"groupInfo\")\n      groupInfo = JSON.parse(groupInfo)\n      console.log(groupInfo)\n      if (groupInfo == null) {\n        this.$router.push({\n          path: \"/\"\n        })\n        return\n      }\n      if (groupInfo.store == undefined || groupInfo.store == null) {\n        groupInfo.store = ['Redis']\n      }\n      this.groupInfo = groupInfo\n      getList({limit: 10, group_id: groupInfo.gid}).then(response => {\n        if (response.data.list != undefined) {\n          this.list = response.data.list\n        }\n        this.listLoading = false\n      })\n    },\n    handleAddExcel() {\n      this.excel = Object.assign({}, defaultExcel),\n      this.excel.owner = this.name\n      this.dialogType = 'new'\n      this.dialogVisible = true\n    },\n    async confirmExcel() {\n      const isEdit = this.dialogType === 'edit'\n      if (isEdit) {\n        await updateExcel(this.excel)\n        for (let index = 0; index < this.list.length; index++) {\n          if (this.list[index].id === this.excel.id) {\n            this.list.splice(index, 1, Object.assign({}, this.excel))\n            break\n          }\n        }\n      } else {\n        var params = this.excel\n        params.uid = this.uid\n        params.group_id = this.groupInfo.gid\n        const { data } = await addExcel(params)\n        this.excel.id = data.eid\n        var timestamp=new Date().getTime()\n        this.excel.createTime = timestamp/1000\n        this.excel.editTime = timestamp/1000\n        this.list.push(this.excel)\n      }\n\n      const { id, name, remark } = this.excel\n      this.dialogVisible = false\n      this.$notify({\n        title: 'Success',\n        dangerouslyUseHTMLString: true,\n        message: `\n            <div>名称: ${name}</div>\n            <div>备注: ${remark}</div>\n          `,\n        type: 'success'\n      })\n    },\n    handleEdit(scope) {\n      this.dialogType = 'edit'\n      this.dialogVisible = true\n      this.checkStrictly = true\n      this.excel = deepClone(scope.row)\n    },\n    handleDelete({$index, row}) {\n      this.$confirm('确定删除表格吗?', 'Warning', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n      .then(async() => {\n        await deleteExcel({id: row.id, name: row.name})\n        this.list.splice($index, 1)\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        })\n      })\n      .catch(err => { console.error(err) })\n    },\n    handleExport(scope) {\n      this.excel = deepClone(scope.row)\n      this.exportDialogVisible = true\n    },\n    async confirmExport() {\n      var params = {}\n      params.gridKey = this.excel.id\n      params.format = this.exportFormat\n      const { data } = await exportExcel(params)\n    },\n    saveGroupConfig() {\n      groupUpdate({id: this.groupInfo.gid, groupInfo: this.groupInfo}).then(response => {\n        if (response.code != 0) {\n          this.$notify({\n            title: '保存失败',\n            dangerouslyUseHTMLString: true,\n            message: response.data.msg,\n            type: 'error'\n          })\n        } else {\n          this.$notify({\n            title: '保存成功',\n            dangerouslyUseHTMLString: true,\n            message: \"\",\n            type: 'success'\n          })\n          localStorage.setItem(\"groupInfo\", JSON.stringify(this.groupInfo))\n        }\n      })\n    },\n    uploadAvatar(e) {\n      e.preventDefault()\n      console.log(e)\n      const files = e.target.files || e.dataTransfer.files\n      if (this.checkFile(files[0])) {\n        this.setSourceImg(files[0])\n      }\n    },\n    /* ---------------------------------------------------------------*/\n    // 检测选择的文件是否合适\n    checkFile(file) {\n      const { lang, maxSize } = this\n      // 仅限图片\n      if (file.type.indexOf('image') === -1) {\n        this.hasError = true\n        this.errorMsg = lang.error.onlyImg\n        return false\n      }\n      // 超出大小\n      if (file.size / 1024 > maxSize) {\n        this.hasError = true\n        this.errorMsg = lang.error.outOfSize + maxSize + 'kb'\n        return false\n      }\n      return true\n    },\n    setSourceImg(file) {\n      const fr = new FileReader()\n      fr.onload = e => {\n        this.groupInfo.avatar = fr.result\n      }\n      fr.readAsDataURL(file)\n    },\n    inArray(arr, target) {\n      for (var i in arr) {\n        if (arr[i] == target) {\n          return true\n        }\n      }\n      return false\n    },\n    testRedisConnection(e) {\n      var params = {dsnType:1,dsn:this.groupInfo.RedisDSN,pwd:this.groupInfo.RedisPassword}\n      groupTestConnection(params)\n      .then(response => {\n        if (response.data.connected == 0 || response.data.connected == undefined) {\n          this.$notify({\n            title: 'Redis连接失败',\n            dangerouslyUseHTMLString: true,\n            message: `请检查DSN配置或者IP白名单配置`,\n            type: 'error'\n          })\n          return\n        } else {\n          this.$notify({\n            title: 'Redis连接成功',\n            dangerouslyUseHTMLString: true,\n            message: ``,\n            type: 'success'\n          })\n        }\n      })\n    },\n    testMysqlConnection() {\n      var params = {dsnType:2,dsn:this.groupInfo.MysqlDSN}\n      groupTestConnection(params)\n      .then(response => {\n        if (response.data.connected == 0 || response.data.connected == undefined) {\n          this.$notify({\n            title: 'Mysql连接失败',\n            dangerouslyUseHTMLString: true,\n            message: `请检查DSN配置或者IP白名单配置`,\n            type: 'error'\n          })\n          return\n        } else {\n          this.$notify({\n            title: 'Mysql连接成功',\n            dangerouslyUseHTMLString: true,\n            message: ``,\n            type: 'success'\n          })\n        }\n      })\n    },\n    testMongodbConnection() {\n      var params = {dsnType:3,dsn:this.groupInfo.MongodbDSN}\n      groupTestConnection(params)\n      .then(response => {\n        if (response.data.connected == 0 || response.data.connected == undefined) {\n          this.$notify({\n            title: 'Mongodb连接失败',\n            dangerouslyUseHTMLString: true,\n            message: `请检查DSN配置或者IP白名单配置`,\n            type: 'error'\n          })\n          return\n        } else {\n          this.$notify({\n            title: 'Mongodb连接成功',\n            dangerouslyUseHTMLString: true,\n            message: ``,\n            type: 'success'\n          })\n        }\n      })\n    },\n    showDeleteMember(scope) {\n      if (this.groupInfo.owner == this.uid) {\n        return this.groupInfo.owner != scope.row.uid\n      }\n      return false\n    },\n    handleAddMember() {\n      this.addMemberdialogVisible = true\n    },\n    addMember() {\n      var exist = false\n      this.groupInfo.members.forEach(m => {\n        if (m.uid == this.searchUid) {\n          exist = true\n          return\n        }\n      })\n      if(exist) {\n        this.$notify({\n            title: '添加失败',\n            dangerouslyUseHTMLString: true,\n            message: `成员已存在`,\n            type: 'error'\n          })\n          return\n      }\n      this.groupInfo.members.push({\n        uid: this.searchUid,\n        userName: this.searchUserName,\n      })\n      this.updateGroupInfo(\"保存成功\", \"添加成员：\"+this.searchUserName)\n      this.addMemberdialogVisible = false\n    },\n    handleSelect(e) {\n      this.searchUid = e.id\n    },\n    handleDeleteMember(scope) {\n      var members = []\n      this.groupInfo.members.forEach( m => {\n        if (m.uid != scope.row.uid) {\n          members.push(m)\n        }\n      })\n      this.groupInfo.members = members\n      this.updateGroupInfo(\"保存成功\", \"删除成员：\"+scope.row.userName)\n    },\n    updateGroupInfo(succTitle, sussMsg) {\n      groupUpdate({id: this.groupInfo.gid, groupInfo: this.groupInfo}).then(response => {\n        if (response.code != 0) {\n          this.$notify({\n            title: '保存失败',\n            dangerouslyUseHTMLString: true,\n            message: response.data.msg,\n            type: 'error'\n          })\n        } else {\n          this.$notify({\n            title: succTitle,\n            dangerouslyUseHTMLString: true,\n            message: sussMsg,\n            type: 'success'\n          })\n          localStorage.setItem(\"groupInfo\", JSON.stringify(this.groupInfo))\n        }\n      })\n    },\n    querySearchAsync(queryString, cb) {\n      var results = []\n      this.searchUid = \"\"\n      if (queryString == \"\") {\n        cb(results);\n        return\n      }\n      searchUser({name: this.searchUserName}).then(response => {\n        if (response.data.userInfos == undefined || response.data.userInfos == null) {\n          cb(results);\n          return\n        }\n        response.data.userInfos.forEach(u => {\n          results.push({\"id\":u.uid, \"value\": u.userName})\n        })\n        console.log(results)\n        cb(results);\n      })\n    },\n  }\n}\n</script>\n\n<style scoped>\n  .avatar-input {\n    float: left;\n    position: absolute;\n    height: 60px;\n    width: 60px;\n    opacity: 0;\n  }\n  #group-icon {\n    float: left;\n    width: 60px;\n    height: 60px;\n    border-radius: 50%;\n    position: absolute;\n  }\n  .store-group {\n    border: 1px solid #DCDFE6;\n    border-radius: 5px;\n    padding: 10px;\n  }\n  .store-group .el-form-item {\n    margin: 10px auto;\n  }\n  .group-title {\n    text-align: center;\n    font-size: 24px;\n    font-weight: bold;\n  }\n</style>"]}]}