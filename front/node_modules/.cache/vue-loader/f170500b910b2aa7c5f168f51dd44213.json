{"remainingRequest":"/Users/Fandy/workspace/e2c/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Fandy/workspace/e2c/front/src/views/table/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Fandy/workspace/e2c/front/src/views/table/index.vue","mtime":1617965430137},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Fandy/workspace/e2c/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldExpc3QsIGRlbGV0ZUV4Y2VsLCB1cGRhdGVFeGNlbCwgYWRkRXhjZWwsIGV4cG9ydEV4Y2VsLCBnZXRTaGVldExpc3QsIGV4cG9ydEV4Y2VsUHJvZCB9IGZyb20gJ0AvYXBpL3NoZWV0JwppbXBvcnQgeyBzZWFyY2hVc2VyIH0gZnJvbSAnQC9hcGkvdXNlcicKaW1wb3J0IHsgZ3JvdXBVcGRhdGUsIGdyb3VwVGVzdENvbm5lY3Rpb24sIGdldENvbmZpZ0Zyb21EQiwgZXhwb3J0Q29uZmlnVG9EQiwgZ2VuZXJhdGVBcHBLZXlTZWNyZXQsIGdyb3VwQWRkLCAKZ3JvdXBMaXN0LCBzeW5jVG9Qcm9kLCBleHBvcnRSZWNvcmQsIGV4cG9ydFJlY29yZENvbnRlbnQsIGV4cG9ydFJvbGxiYWNrICB9IGZyb20gJ0AvYXBpL2dyb3VwJwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgZGVlcENsb25lIH0gZnJvbSAnQC91dGlscycKaW1wb3J0IENvZGVEaWZmIGZyb20gJ3Z1ZS1jb2RlLWRpZmYnCmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJwoKY29uc3QgZGVmYXVsdEV4Y2VsID0gewogIGlkOiAnJywKICBuYW1lOiAnJywKICBvd25lcjogJycsCiAgcmVtYXJrOiAnJywKICBjcmVhdGVfdGltZTogJycsCiAgdXBkYXRlX3RpbWU6ICcnLAp9CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge0NvZGVEaWZmfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICd1aWQnLAogICAgICAnbmFtZScKICAgIF0pCiAgfSwKICBmaWx0ZXJzOiB7CiAgICBzdGF0dXNGaWx0ZXIoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHN0YXR1c01hcCA9IHsKICAgICAgICBwdWJsaXNoZWQ6ICdzdWNjZXNzJywKICAgICAgICBkcmFmdDogJ2dyYXknLAogICAgICAgIGRlbGV0ZWQ6ICdkYW5nZXInCiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdCiAgICB9LAogICAgZGF0ZUZpbHRlcihkYXRldGltZSkgewogICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQoZGF0ZXRpbWUpICogMTAwMCkudG9Mb2NhbGVTdHJpbmcoKS5yZXBsYWNlKC86XGR7MSwyfSQvLCcgJyk7CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXhjZWw6IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRFeGNlbCksCiAgICAgIGxpc3Q6IFtdLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ1R5cGU6ICduZXcnLAogICAgICBleHBvcnREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZXhwb3J0Rm9ybWF0OiAnJywKICAgICAgZm9ybToge30sCiAgICAgIGdyb3VwSW5mbzogewogICAgICAgIG5hbWU6ICLotKrlkIPom4flpKfkvZzmiJgiLAogICAgICAgIHJlbWFyazogIui/meaYr+i0quWQg+ibh+Wkp+S9nOaImEFwcOmhueebriIsCiAgICAgICAgYXZhdGFyOiByZXF1aXJlKCIuLi8uLi9pY29ucy90YW5jaGlzaGUtaWNvbi5wbmciKSwKICAgICAgICBzdG9yZTogW10sCiAgICAgICAgR3JwY0FwcEtleTogIiIsCiAgICAgICAgR3JwY0FwcFNlY3JldDogIiIsCiAgICAgICAgR3JwY0RTTjogIiIsCiAgICAgIH0sCiAgICAgIHN0b3JlT3B0aW9uczogWwogICAgICAgIHtrZXk6IDEsIG5hbWU6ICJSZWRpcyJ9LAogICAgICAgIHtrZXk6IDIsIG5hbWU6ICJNeXNxbCJ9LAogICAgICAgIC8vIHtrZXk6ICJNb25nb2RiIiwgbmFtZTogIk1vbmdvZGIifSwKICAgICAgICB7a2V5OiA0LCBuYW1lOiAiRGF0YWJ1cyJ9LAogICAgICBdLAogICAgICBhZGRNZW1iZXJkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc2VhcmNoVXNlck5hbWU6ICIiLAogICAgICBzZWFyY2hVaWQ6ICIiLAogICAgICBjb21wYXJlVmlzYWJsZTogZmFsc2UsCiAgICAgIG9sZFN0cjogJycsCiAgICAgIG5ld1N0cjogJycsCiAgICAgIHNoZWV0TGlzdDogW10sCiAgICAgIHNsZWVjdGVkU2hlZXQ6ICcnLAogICAgICBleHBvcnRQcm9kRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGV4cG9ydFJlY29yZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzZWxlY3RSZWNvcmRJZDogJycsCiAgICAgIHJlY29yZExpc3Q6IFtdLAogICAgICBleHBvcnRSZW1hcms6ICIiLAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZXhjZWwub3duZXIgPSB0aGlzLm5hbWUKICAgIHRoaXMuZmV0Y2hEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YSgpIHsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUKICAgICAgdmFyIGdyb3VwSW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJncm91cEluZm8iKQogICAgICBncm91cEluZm8gPSBKU09OLnBhcnNlKGdyb3VwSW5mbykKICAgICAgY29uc29sZS5sb2coZ3JvdXBJbmZvKQogICAgICBpZiAoZ3JvdXBJbmZvID09IG51bGwpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiLyIKICAgICAgICB9KQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmIChncm91cEluZm8uc3RvcmUgPT0gdW5kZWZpbmVkIHx8IGdyb3VwSW5mby5zdG9yZSA9PSBudWxsKSB7CiAgICAgICAgZ3JvdXBJbmZvLnN0b3JlID0gW10KICAgICAgfQogICAgICB0aGlzLmdyb3VwSW5mbyA9IGdyb3VwSW5mbwogICAgICBnZXRMaXN0KHtsaW1pdDogMTAsIGdyb3VwX2lkOiBncm91cEluZm8uZ2lkfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGlzdCAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdAogICAgICAgIH0KICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVBZGRFeGNlbCgpIHsKICAgICAgdGhpcy5leGNlbCA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRFeGNlbCksCiAgICAgIHRoaXMuZXhjZWwub3duZXIgPSB0aGlzLm5hbWUKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gJ25ldycKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGhhbmRsZVN3aXRjaEVudigpIHsKICAgICAgdmFyIHRleHQgPSAi5b2T5YmN5aSE5LqO5q2j5byP546v5aKD77yM5piv5ZCm56Gu6K6k5YiH5o2i5Yiw5rWL6K+V546v5aKDIgogICAgICBpZiAodGhpcy5ncm91cEluZm8uSXNEZXYpIHsKICAgICAgICAgIHRleHQgPSAi5b2T5YmN5aSE5LqO5rWL6K+V546v5aKD77yM5piv5ZCm56Gu6K6k5YiH5o2i5Yiw5q2j5byP546v5aKDIgogICAgICB9CiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSh0ZXh0LCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdmFyIHVuaW9uR2lkID0gdGhpcy5ncm91cEluZm8uVW5pb25Hcm91cElkCiAgICAgICAgZ3JvdXBMaXN0KHVuaW9uR2lkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmdyb3VwSW5mbyA9IHJlc3BvbnNlLmRhdGEubGlzdFswXQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZ3JvdXBJbmZvIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cEluZm8pKQogICAgICAgICAgICAvLyByZWZyZXNoIAogICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGgKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIHBhdGgsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHQ6ICtuZXcgRGF0ZSgpIC8v5L+d6K+B5q+P5qyh54K55Ye76Lev55Sx55qEcXVlcnnpobnpg73mmK/kuI3kuIDmoLfnmoTvvIznoa7kv53kvJrph43mlrDliLfmlrB2aWV3CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfSkKICAgIH0sCiAgICBhc3luYyBjb25maXJtRXhjZWwoKSB7CiAgICAgIGlmKHRoaXMuZXhjZWwubmFtZS5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlkI3np7AnCiAgICAgICAgfSkKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb25zdCBpc0VkaXQgPSB0aGlzLmRpYWxvZ1R5cGUgPT09ICdlZGl0JwogICAgICBpZiAoaXNFZGl0KSB7CiAgICAgICAgYXdhaXQgdXBkYXRlRXhjZWwodGhpcy5leGNlbCkKICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5saXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgaWYgKHRoaXMubGlzdFtpbmRleF0uaWQgPT09IHRoaXMuZXhjZWwuaWQpIHsKICAgICAgICAgICAgdGhpcy5saXN0LnNwbGljZShpbmRleCwgMSwgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5leGNlbCkpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLmV4Y2VsCiAgICAgICAgcGFyYW1zLnVpZCA9IHRoaXMudWlkCiAgICAgICAgcGFyYW1zLmdyb3VwX2lkID0gdGhpcy5ncm91cEluZm8uZ2lkCiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhZGRFeGNlbChwYXJhbXMpCiAgICAgICAgdGhpcy5leGNlbC5pZCA9IGRhdGEuZWlkCiAgICAgICAgdmFyIHRpbWVzdGFtcD1uZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgIHRoaXMuZXhjZWwuY3JlYXRlVGltZSA9IHRpbWVzdGFtcC8xMDAwCiAgICAgICAgdGhpcy5leGNlbC5lZGl0VGltZSA9IHRpbWVzdGFtcC8xMDAwCiAgICAgICAgdGhpcy5saXN0LnB1c2godGhpcy5leGNlbCkKICAgICAgfQoKICAgICAgY29uc3QgeyBpZCwgbmFtZSwgcmVtYXJrIH0gPSB0aGlzLmV4Y2VsCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgbWVzc2FnZTogYAogICAgICAgICAgICA8ZGl2PuWQjeensDogJHtuYW1lfTwvZGl2PgogICAgICAgICAgICA8ZGl2PuWkh+azqDogJHtyZW1hcmt9PC9kaXY+CiAgICAgICAgICBgLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUVkaXQoc2NvcGUpIHsKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gJ2VkaXQnCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5jaGVja1N0cmljdGx5ID0gdHJ1ZQogICAgICB0aGlzLmV4Y2VsID0gZGVlcENsb25lKHNjb3BlLnJvdykKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoeyRpbmRleCwgcm93fSkgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTooajmoLzlkJc/JywgJ1dhcm5pbmcnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KQogICAgICAudGhlbihhc3luYygpID0+IHsKICAgICAgICBhd2FpdCBkZWxldGVFeGNlbCh7aWQ6IHJvdy5pZCwgbmFtZTogcm93Lm5hbWV9KQogICAgICAgIHRoaXMubGlzdC5zcGxpY2UoJGluZGV4LCAxKQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgfSkKICAgICAgfSkKICAgICAgLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUuZXJyb3IoZXJyKSB9KQogICAgfSwKICAgIGhhbmRsZUV4cG9ydChzY29wZSkgewogICAgICB0aGlzLmV4Y2VsID0gZGVlcENsb25lKHNjb3BlLnJvdykKICAgICAgdGhpcy5leHBvcnREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLnNoZWV0TGlzdCA9IFtdCiAgICAgIHRoaXMub2xkU3RyID0gJycKICAgICAgdGhpcy5uZXdTdHIgPSAnJwogICAgICB0aGlzLmV4cG9ydFJlbWFyayA9ICcnCiAgICAgIGdldFNoZWV0TGlzdCh7Z3JpZEtleTogdGhpcy5leGNlbC5pZH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDApIHsKICAgICAgICAgIHRoaXMuc2hlZXRMaXN0ID0gcmVzcG9uc2UuZGF0YS5zaGVldE5hbWUgCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNoZWV0TGlzdCkKICAgICAgICAgIGlmICh0aGlzLnNoZWV0TGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMuc2xlZWN0ZWRTaGVldCA9IHRoaXMuc2hlZXRMaXN0WzBdCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmdldEV4Y2VsU2hlZXRDb250ZW50KHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCkKICAgICAgICAgIHRoaXMuZ2V0RXhjZWxTaGVldEZyb21EQih0aGlzLmV4Y2VsLmlkLCB0aGlzLnNsZWVjdGVkU2hlZXQpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUV4cG9ydFByb2Qoc2NvcGUpIHsKICAgICAgdGhpcy5leGNlbCA9IGRlZXBDbG9uZShzY29wZS5yb3cpCiAgICAgIHRoaXMuZXhwb3J0UHJvZERpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuc2hlZXRMaXN0ID0gW10KICAgICAgdGhpcy5vbGRTdHIgPSAnJwogICAgICB0aGlzLm5ld1N0ciA9ICcnCiAgICAgIGdldFNoZWV0TGlzdCh7Z3JpZEtleTogdGhpcy5leGNlbC5pZH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDApIHsKICAgICAgICAgIHRoaXMuc2hlZXRMaXN0ID0gcmVzcG9uc2UuZGF0YS5zaGVldE5hbWUgCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNoZWV0TGlzdCkKICAgICAgICAgIGlmICh0aGlzLnNoZWV0TGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMuc2xlZWN0ZWRTaGVldCA9IHRoaXMuc2hlZXRMaXN0WzBdCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmdldEV4Y2VsU2hlZXRDb250ZW50KHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCkKICAgICAgICAgIHRoaXMuZ2V0RXhjZWxTaGVldEZyb21Qcm9kKHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRXhwb3J0UmVjb3JkKHNjb3BlKSB7CiAgICAgIHRoaXMuZXhjZWwgPSBkZWVwQ2xvbmUoc2NvcGUucm93KQogICAgICB0aGlzLmV4cG9ydFJlY29yZERpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuc2hlZXRMaXN0ID0gW10KICAgICAgdGhpcy5leHBvcnRSZWNvcmQgPSBbXQogICAgICB0aGlzLm9sZFN0ciA9ICcnCiAgICAgIHRoaXMubmV3U3RyID0gJycKICAgICAgZ2V0U2hlZXRMaXN0KHtncmlkS2V5OiB0aGlzLmV4Y2VsLmlkfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMCkgewogICAgICAgICAgdGhpcy5zaGVldExpc3QgPSByZXNwb25zZS5kYXRhLnNoZWV0TmFtZSAKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2hlZXRMaXN0KQogICAgICAgICAgaWYgKHRoaXMuc2hlZXRMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy5zbGVlY3RlZFNoZWV0ID0gdGhpcy5zaGVldExpc3RbMF0KICAgICAgICAgIH0KICAgICAgICAgIC8v6I635Y+WcmVjb3JkIGxpc3QKICAgICAgICAgIHRoaXMuZ2V0UmVjb3JkTGlzdCgpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdldFJlY29yZExpc3QoKSB7CiAgICAgIGV4cG9ydFJlY29yZCh7Z3JpZEtleTogdGhpcy5leGNlbC5pZCwgc2hlZXROYW1lOiB0aGlzLnNsZWVjdGVkU2hlZXR9KS50aGVuKHJlc3AgPT4gewogICAgICAgIGlmIChyZXNwLmRhdGEgIT0gbnVsbCkgewogICAgICAgICAgdGhpcy5yZWNvcmRMaXN0ID0gcmVzcC5kYXRhLmxpc3QKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMucmVjb3JkTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdFJlY29yZElkID0gdGhpcy5yZWNvcmRMaXN0WzBdLmlkCiAgICAgICAgfQogICAgICAgIHRoaXMucmVmcmVzaFJlY29yZENvbnRlbnQoKQogICAgICB9KQogICAgfSwKICAgIHJlZnJlc2hSZWNvcmRDb250ZW50KCkgewogICAgICB2YXIgbGFzdFJlY29yZElkID0gJycKICAgICAgLy8g5Yik5pat5piv5ZCm5pyJ5LiK5LiA5LiqcmVjb3JkCiAgICAgIGZvciAodmFyIGk9MDtpPHRoaXMucmVjb3JkTGlzdC5sZW5ndGg7aSsrKSB7CiAgICAgICAgaWYodGhpcy5yZWNvcmRMaXN0W2ldLmlkID09IHRoaXMuc2VsZWN0UmVjb3JkSWQpIHsKICAgICAgICAgIGlmIChpKzE8dGhpcy5yZWNvcmRMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygicmVjb3Jk77yaIiwgdGhpcy5yZWNvcmRMaXN0W2krMV0pCiAgICAgICAgICAgIGxhc3RSZWNvcmRJZCA9IHRoaXMucmVjb3JkTGlzdFtpKzFdLmlkCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZ2V0RXhjZWxTaGVldEZyb21SZWNvcmQodGhpcy5leGNlbC5pZCwgdGhpcy5zbGVlY3RlZFNoZWV0LCB0aGlzLnNlbGVjdFJlY29yZElkKQogICAgICB0aGlzLmdldEV4Y2VsU2hlZXRGcm9tUmVjb3JkKHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCwgbGFzdFJlY29yZElkKQogICAgfSwKICAgIGFzeW5jIGdldEV4Y2VsU2hlZXRDb250ZW50KGdyaWRLZXksIHNoZWV0TmFtZSkgewogICAgICB0aGlzLm5ld1N0ciA9ICIiCiAgICAgIHZhciBwYXJhbXMgPSB7fQogICAgICBwYXJhbXMuZ3JpZEtleSA9IGdyaWRLZXkKICAgICAgcGFyYW1zLnNoZWV0TmFtZSA9IHNoZWV0TmFtZQogICAgICBwYXJhbXMuZm9ybWF0ID0gJ2pzb24nCiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgZXhwb3J0RXhjZWwocGFyYW1zKQogICAgICBpZiAoZGF0YS5qc29uc3RyICE9IHVuZGVmaW5lZCAmJiBkYXRhLmpzb25zdHIubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBqc29uT2JqID0gSlNPTi5wYXJzZShkYXRhLmpzb25zdHIpCiAgICAgICAgdGhpcy5uZXdTdHIgPSBKU09OLnN0cmluZ2lmeShqc29uT2JqLCBudWxsLCAiICIpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRFeGNlbFNoZWV0RnJvbURCKGdyaWRLZXksIHNoZWV0TmFtZSkgewogICAgICB0aGlzLm9sZFN0ciA9ICIiCiAgICAgIHZhciBwYXJhbXMgPSB7fQogICAgICBwYXJhbXMuZ3JpZEtleSA9IGdyaWRLZXkKICAgICAgcGFyYW1zLnNoZWV0TmFtZSA9IHNoZWV0TmFtZQogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGdldENvbmZpZ0Zyb21EQihwYXJhbXMpCiAgICAgIGlmIChkYXRhLmpzb25zdHIgIT0gdW5kZWZpbmVkICYmIGRhdGEuanNvbnN0ci5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGpzb25PYmogPSBKU09OLnBhcnNlKGRhdGEuanNvbnN0cikKICAgICAgICB0aGlzLm9sZFN0ciA9IEpTT04uc3RyaW5naWZ5KGpzb25PYmosIG51bGwsICIgIikKICAgICAgfQogICAgfSwKICAgICBhc3luYyBnZXRFeGNlbFNoZWV0RnJvbVByb2QoZ3JpZEtleSwgc2hlZXROYW1lKSB7CiAgICAgIHRoaXMub2xkU3RyID0gIiIKICAgICAgdmFyIHBhcmFtcyA9IHt9CiAgICAgIHBhcmFtcy5ncmlkS2V5ID0gZ3JpZEtleQogICAgICBwYXJhbXMuc2hlZXROYW1lID0gc2hlZXROYW1lCiAgICAgIHBhcmFtcy5mb3JtYXQgPSAnanNvbicKICAgICAgcGFyYW1zLmdpZCA9IHRoaXMuZ3JvdXBJbmZvLmdpZAogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGV4cG9ydEV4Y2VsUHJvZChwYXJhbXMpCiAgICAgIGlmKGRhdGEuanNvbnN0ciAhPSB1bmRlZmluZWQgJiYgZGF0YS5qc29uc3RyLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIganNvbk9iaiA9IEpTT04ucGFyc2UoZGF0YS5qc29uc3RyKQogICAgICAgIHRoaXMub2xkU3RyID0gSlNPTi5zdHJpbmdpZnkoanNvbk9iaiwgbnVsbCwgIiAiKQogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0RXhjZWxTaGVldEZyb21SZWNvcmQoZ3JpZEtleSwgc2hlZXROYW1lLCByZWNvcmRJZCkgewogICAgICBpZihyZWNvcmRJZCA9PSB0aGlzLnNlbGVjdFJlY29yZElkKSB7CiAgICAgICAgdGhpcy5uZXdTdHIgPSAiIgogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub2xkU3RyID0gIiIKICAgICAgfQogICAgICBpZiAocmVjb3JkSWQubGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB2YXIgcGFyYW1zID0ge30KICAgICAgcGFyYW1zLmdyaWRLZXkgPSBncmlkS2V5CiAgICAgIHBhcmFtcy5zaGVldE5hbWUgPSBzaGVldE5hbWUKICAgICAgcGFyYW1zLnJlY29yZElkID0gcmVjb3JkSWQKICAgICAgcGFyYW1zLmZvcm1hdCA9ICdqc29uJwogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGV4cG9ydFJlY29yZENvbnRlbnQocGFyYW1zKQogICAgICBpZiAoZGF0YS5qc29uc3RyICE9IHVuZGVmaW5lZCAmJiBkYXRhLmpzb25zdHIubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBqc29uT2JqID0gSlNPTi5wYXJzZShkYXRhLmpzb25zdHIpCiAgICAgICAgaWYocmVjb3JkSWQgPT0gdGhpcy5zZWxlY3RSZWNvcmRJZCkgewogICAgICAgICAgdGhpcy5uZXdTdHIgPSBKU09OLnN0cmluZ2lmeShqc29uT2JqLCBudWxsLCAiICIpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMub2xkU3RyID0gSlNPTi5zdHJpbmdpZnkoanNvbk9iaiwgbnVsbCwgIiAiKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZVJvbGxCYWNrKCkgewogICAgICB2YXIgdGV4dCA9ICLmgqjlvZPliY3pgInmi6nnmoTphY3nva7ooajmmK8gXCIiICsgdGhpcy5zbGVlY3RlZFNoZWV0ICsgIlwiLCDnoa7orqTopoHlm57pgIDniYjmnKzlkJfvvJ8iCiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSh0ZXh0LCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdmFyIHBhcmFtcyA9IHt9CiAgICAgICAgcGFyYW1zLmdyaWRLZXkgPSB0aGlzLmV4Y2VsLmlkCiAgICAgICAgcGFyYW1zLnNoZWV0TmFtZSA9IHRoaXMuc2xlZWN0ZWRTaGVldAogICAgICAgIHBhcmFtcy5yZWNvcmRJZCA9IHRoaXMuc2VsZWN0UmVjb3JkSWQKICAgICAgICBleHBvcnRSb2xsYmFjayhwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gMCkgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+WbnumAgOWksei0pScsCiAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1zZywKICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+WbnumAgOaIkOWKnycsCiAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgdGhpcy5leHBvcnRSZWNvcmREaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfSkKICAgIH0sCiAgICBvblNlbGVjdGVkU2hlZXRDaGFuZ2UoZSkgewogICAgICBjb25zb2xlLmxvZyhlKQogICAgICBpZihlID09IDEpIHsgLy8g5Y+R5biD5by556qXCiAgICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0Q29udGVudCh0aGlzLmV4Y2VsLmlkLCB0aGlzLnNsZWVjdGVkU2hlZXQpCiAgICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0RnJvbURCKHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCkKICAgICAgfSBlbHNlIGlmIChlID09IDIpIHsgLy8g5ZCM5q2l5by556qXCiAgICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0Q29udGVudCh0aGlzLmV4Y2VsLmlkLCB0aGlzLnNsZWVjdGVkU2hlZXQpCiAgICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0RnJvbVByb2QodGhpcy5leGNlbC5pZCwgdGhpcy5zbGVlY3RlZFNoZWV0KQogICAgICB9IGVsc2UgaWYgKGUgPT0gMykgeyAvL+WPkeW4g+iusOW9leW8ueeqlwogICAgICAgIHRoaXMuc2VsZWN0UmVjb3JkSWQgPSAnJwogICAgICAgIHRoaXMubmV3U3RyID0gJycKICAgICAgICB0aGlzLm9sZFN0ciA9ICcnCiAgICAgICAgdGhpcy5yZWNvcmRMaXN0ID0gW10KICAgICAgICB0aGlzLmdldFJlY29yZExpc3QoKQogICAgICB9CiAgICB9LAogICAgb25TZWxlY3RSZWNvcmRDaGFuZ2UoZSkgewogICAgICBjb25zb2xlLmxvZygic2VsZWN0IHJlY29yZCBjaGFuZ2VkIikKICAgICAgdGhpcy5yZWZyZXNoUmVjb3JkQ29udGVudCgpCiAgICB9LAogICAgY29uZmlybUV4cG9ydCgpIHsKICAgICAgaWYodGhpcy5leHBvcnRSZW1hcmsubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ+WPkeW4g+Wksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+Whq+WGmeWPkeW4g+WGheWuuSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB2YXIgdGV4dCA9ICLmgqjlvZPliY3pgInmi6nnmoTphY3nva7ooajmmK8gXCIiICsgdGhpcy5zbGVlY3RlZFNoZWV0ICsgIlwiLCDkv67mlLnlpIfms6jkuLogXCIiK3RoaXMuZXhwb3J0UmVtYXJrICsgIlwiLCDnoa7orqTlj5HluIPlkJfvvJ8iCiAgICAgIGlmICghdGhpcy5ncm91cEluZm8uSXNEZXYpIHsKICAgICAgICB0ZXh0ID0gIuW9k+WJjeWkhOS6juato+W8j+eOr+WigywgIiArIHRleHQKICAgICAgfQogICAgICBNZXNzYWdlQm94LmNvbmZpcm0odGV4dCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB2YXIgcGFyYW1zID0ge30KICAgICAgICBwYXJhbXMuZ3JpZEtleSA9IHRoaXMuZXhjZWwuaWQKICAgICAgICBwYXJhbXMuc2hlZXROYW1lID0gdGhpcy5zbGVlY3RlZFNoZWV0CiAgICAgICAgcGFyYW1zLnJlbWFyayA9IHRoaXMuZXhwb3J0UmVtYXJrCiAgICAgICAgZXhwb3J0Q29uZmlnVG9EQihwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMCkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgIHRpdGxlOiAn5Y+R5biD5aSx6LSlJywKICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgIHRpdGxlOiAn5Y+R5biD5oiQ5YqfJywKICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB0aGlzLmV4cG9ydERpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBjb25maXJtRXhwb3J0UHJvZCgpIHsKICAgICAgdmFyIHBhcmFtcyA9IHt9CiAgICAgIHBhcmFtcy5ncmlkS2V5ID0gdGhpcy5leGNlbC5pZAogICAgICBwYXJhbXMuc2hlZXROYW1lID0gdGhpcy5zbGVlY3RlZFNoZWV0CiAgICAgIHBhcmFtcy5naWQgPSB0aGlzLmdyb3VwSW5mby5naWQKICAgICAgc3luY1RvUHJvZChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDApIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlICE9IDApIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5ZCM5q2l5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1zZywKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICflkIzmraXmiJDlip8nLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmV4cG9ydFByb2REaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHNhdmVHcm91cENvbmZpZygpIHsKICAgICAgZ3JvdXBVcGRhdGUoe2lkOiB0aGlzLmdyb3VwSW5mby5naWQsIGdyb3VwSW5mbzogdGhpcy5ncm91cEluZm99KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSAwKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ+S/neWtmOWksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tc2csCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5L+d5a2Y5oiQ5YqfJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImdyb3VwSW5mbyIsIEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBJbmZvKSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgdXBsb2FkQXZhdGFyKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIGNvbnN0IGZpbGVzID0gZS50YXJnZXQuZmlsZXMgfHwgZS5kYXRhVHJhbnNmZXIuZmlsZXMKICAgICAgaWYgKHRoaXMuY2hlY2tGaWxlKGZpbGVzWzBdKSkgewogICAgICAgIHRoaXMuc2V0U291cmNlSW1nKGZpbGVzWzBdKQogICAgICB9CiAgICB9LAogICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIC8vIOajgOa1i+mAieaLqeeahOaWh+S7tuaYr+WQpuWQiOmAggogICAgY2hlY2tGaWxlKGZpbGUpIHsKICAgICAgY29uc3QgeyBsYW5nLCBtYXhTaXplIH0gPSB0aGlzCiAgICAgIC8vIOS7hemZkOWbvueJhwogICAgICBpZiAoZmlsZS50eXBlLmluZGV4T2YoJ2ltYWdlJykgPT09IC0xKSB7CiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWUKICAgICAgICB0aGlzLmVycm9yTXNnID0gbGFuZy5lcnJvci5vbmx5SW1nCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgLy8g6LaF5Ye65aSn5bCPCiAgICAgIGlmIChmaWxlLnNpemUgLyAxMDI0ID4gbWF4U2l6ZSkgewogICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlCiAgICAgICAgdGhpcy5lcnJvck1zZyA9IGxhbmcuZXJyb3Iub3V0T2ZTaXplICsgbWF4U2l6ZSArICdrYicKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfSwKICAgIHNldFNvdXJjZUltZyhmaWxlKSB7CiAgICAgIGNvbnN0IGZyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICBmci5vbmxvYWQgPSBlID0+IHsKICAgICAgICB0aGlzLmdyb3VwSW5mby5hdmF0YXIgPSBmci5yZXN1bHQKICAgICAgfQogICAgICBmci5yZWFkQXNEYXRhVVJMKGZpbGUpCiAgICB9LAogICAgaW5BcnJheShhcnIsIHRhcmdldCkgewogICAgICBmb3IgKHZhciBpIGluIGFycikgewogICAgICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2UKICAgIH0sCiAgICB0ZXN0UmVkaXNDb25uZWN0aW9uKGUpIHsKICAgICAgdmFyIHBhcmFtcyA9IHtkc25UeXBlOjEsZHNuOnRoaXMuZ3JvdXBJbmZvLlJlZGlzRFNOLHB3ZDp0aGlzLmdyb3VwSW5mby5SZWRpc1Bhc3N3b3JkfQogICAgICBncm91cFRlc3RDb25uZWN0aW9uKHBhcmFtcykKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSAwIHx8IHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkID09IHVuZGVmaW5lZCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdSZWRpc+i/nuaOpeWksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYOivt+ajgOafpURTTumFjee9ruaIluiAhUlQ55m95ZCN5Y2V6YWN572uYCwKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ1JlZGlz6L+e5o6l5oiQ5YqfJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBgYCwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICB0ZXN0TXlzcWxDb25uZWN0aW9uKCkgewogICAgICB2YXIgcGFyYW1zID0ge2RzblR5cGU6Mixkc246dGhpcy5ncm91cEluZm8uTXlzcWxEU059CiAgICAgIGdyb3VwVGVzdENvbm5lY3Rpb24ocGFyYW1zKQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkID09IDAgfHwgcmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ015c3Fs6L+e5o6l5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBg6K+35qOA5p+lRFNO6YWN572u5oiW6ICFSVDnmb3lkI3ljZXphY3nva5gLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnTXlzcWzov57mjqXmiJDlip8nLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IGBgLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHRlc3RHUnBjQ29ubmVjdGlvbigpIHsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBkc25UeXBlOjQsCiAgICAgICAgZHNuOiAgICB0aGlzLmdyb3VwSW5mby5HcnBjRFNOLAogICAgICAgIGFwcEtleTogdGhpcy5ncm91cEluZm8uR3JwY0FwcEtleSwKICAgICAgICBhcHBTZWNyZXQ6IHRoaXMuZ3JvdXBJbmZvLkdycGNBcHBTZWNyZXQsCiAgICAgIH0KICAgICAgZ3JvdXBUZXN0Q29ubmVjdGlvbihwYXJhbXMpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gMCB8fCByZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnRGF0YWJ1c+i/nuaOpeWksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYOivt+WQr+WKqERhdGFidXPmnI3liqHvvIzmo4Dmn6VEU07lkoxBcHBLZXnjgIFBcHBTZWNyZXTphY3nva5gLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnRGF0YWJ1c+i/nuaOpeaIkOWKnycsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYGAsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZ2VuZXJhdGVBcHBLZXlTZWNyZXRIYW5kbGVyKCkgewogICAgICB2YXIgdm0gPSB0aGlzCiAgICAgIGdlbmVyYXRlQXBwS2V5U2VjcmV0KCkKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09IG51bGwgfHwgcmVzcG9uc2UuZGF0YS5hcHBLZXkgPT0gIiIgfHwgcmVzcG9uc2UuZGF0YS5hcHBTZWNyZXQgPT0gIiIpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn6I635Y+W5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBg6K+36IGU57O7566h55CG5ZGYYCwKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ+iOt+WPluaIkOWKnycsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYOivt+WPgumYheaWh+aho+aQreW7umUyY2RhdGFidXPmnI3liqHlmahgLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmdyb3VwSW5mby5HcnBjRFNOID0gIiIKICAgICAgICAgIHRoaXMuZ3JvdXBJbmZvLkdycGNBcHBLZXkgPSByZXNwb25zZS5kYXRhLmFwcEtleQogICAgICAgICAgdGhpcy5ncm91cEluZm8uR3JwY0FwcFNlY3JldCA9IHJlc3BvbnNlLmRhdGEuYXBwU2VjcmV0CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHRlc3RNb25nb2RiQ29ubmVjdGlvbigpIHsKICAgICAgdmFyIHBhcmFtcyA9IHtkc25UeXBlOjMsZHNuOnRoaXMuZ3JvdXBJbmZvLk1vbmdvZGJEU059CiAgICAgIGdyb3VwVGVzdENvbm5lY3Rpb24ocGFyYW1zKQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkID09IDAgfHwgcmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ01vbmdvZGLov57mjqXlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IGDor7fmo4Dmn6VEU07phY3nva7miJbogIVJUOeZveWQjeWNlemFjee9rmAsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdNb25nb2Ri6L+e5o6l5oiQ5YqfJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBgYCwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBzaG93RGVsZXRlTWVtYmVyKHNjb3BlKSB7CiAgICAgIGlmICh0aGlzLmdyb3VwSW5mby5vd25lciA9PSB0aGlzLnVpZCkgewogICAgICAgIHJldHVybiB0aGlzLmdyb3VwSW5mby5vd25lciAhPSBzY29wZS5yb3cudWlkCiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlCiAgICB9LAogICAgaGFuZGxlQWRkTWVtYmVyKCkgewogICAgICB0aGlzLmFkZE1lbWJlcmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgYWRkTWVtYmVyKCkgewogICAgICB2YXIgZXhpc3QgPSBmYWxzZQogICAgICB0aGlzLmdyb3VwSW5mby5tZW1iZXJzLmZvckVhY2gobSA9PiB7CiAgICAgICAgaWYgKG0udWlkID09IHRoaXMuc2VhcmNoVWlkKSB7CiAgICAgICAgICBleGlzdCA9IHRydWUKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgfSkKICAgICAgaWYoZXhpc3QpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ+a3u+WKoOWksei0pScsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYOaIkOWRmOW3suWtmOWcqGAsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmdyb3VwSW5mby5tZW1iZXJzLnB1c2goewogICAgICAgIHVpZDogdGhpcy5zZWFyY2hVaWQsCiAgICAgICAgdXNlck5hbWU6IHRoaXMuc2VhcmNoVXNlck5hbWUsCiAgICAgIH0pCiAgICAgIHRoaXMudXBkYXRlR3JvdXBJbmZvKCLkv53lrZjmiJDlip8iLCAi5re75Yqg5oiQ5ZGY77yaIit0aGlzLnNlYXJjaFVzZXJOYW1lKQogICAgICB0aGlzLmFkZE1lbWJlcmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZVNlbGVjdChlKSB7CiAgICAgIHRoaXMuc2VhcmNoVWlkID0gZS5pZAogICAgfSwKICAgIGhhbmRsZURlbGV0ZU1lbWJlcihzY29wZSkgewogICAgICB2YXIgbWVtYmVycyA9IFtdCiAgICAgIHRoaXMuZ3JvdXBJbmZvLm1lbWJlcnMuZm9yRWFjaCggbSA9PiB7CiAgICAgICAgaWYgKG0udWlkICE9IHNjb3BlLnJvdy51aWQpIHsKICAgICAgICAgIG1lbWJlcnMucHVzaChtKQogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5ncm91cEluZm8ubWVtYmVycyA9IG1lbWJlcnMKICAgICAgdGhpcy51cGRhdGVHcm91cEluZm8oIuS/neWtmOaIkOWKnyIsICLliKDpmaTmiJDlkZjvvJoiK3Njb3BlLnJvdy51c2VyTmFtZSkKICAgIH0sCiAgICB1cGRhdGVHcm91cEluZm8oc3VjY1RpdGxlLCBzdXNzTXNnKSB7CiAgICAgIGdyb3VwVXBkYXRlKHtpZDogdGhpcy5ncm91cEluZm8uZ2lkLCBncm91cEluZm86IHRoaXMuZ3JvdXBJbmZvfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gMCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogc3VjY1RpdGxlLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHN1c3NNc2csCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSkKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJncm91cEluZm8iLCBKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwSW5mbykpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHF1ZXJ5U2VhcmNoQXN5bmMocXVlcnlTdHJpbmcsIGNiKSB7CiAgICAgIHZhciByZXN1bHRzID0gW10KICAgICAgdGhpcy5zZWFyY2hVaWQgPSAiIgogICAgICBpZiAocXVlcnlTdHJpbmcgPT0gIiIpIHsKICAgICAgICBjYihyZXN1bHRzKTsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBzZWFyY2hVc2VyKHtuYW1lOiB0aGlzLnNlYXJjaFVzZXJOYW1lfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudXNlckluZm9zID09IHVuZGVmaW5lZCB8fCByZXNwb25zZS5kYXRhLnVzZXJJbmZvcyA9PSBudWxsKSB7CiAgICAgICAgICBjYihyZXN1bHRzKTsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICByZXNwb25zZS5kYXRhLnVzZXJJbmZvcy5mb3JFYWNoKHUgPT4gewogICAgICAgICAgcmVzdWx0cy5wdXNoKHsiaWQiOnUudWlkLCAidmFsdWUiOiB1LnVzZXJOYW1lfSkKICAgICAgICB9KQogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpCiAgICAgICAgY2IocmVzdWx0cyk7CiAgICAgIH0pCiAgICB9LAogIH0KfQo="},null]}