{"remainingRequest":"/Users/Fandy/go/src/excel2config/front/node_modules/thread-loader/dist/cjs.js!/Users/Fandy/go/src/excel2config/front/node_modules/babel-loader/lib/index.js!/Users/Fandy/go/src/excel2config/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Fandy/go/src/excel2config/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Fandy/go/src/excel2config/front/src/views/table/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Fandy/go/src/excel2config/front/src/views/table/index.vue","mtime":1618280703743},{"path":"/Users/Fandy/go/src/excel2config/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Fandy/go/src/excel2config/front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Fandy/go/src/excel2config/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Fandy/go/src/excel2config/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Fandy/go/src/excel2config/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9GYW5keS9nby9zcmMvZXhjZWwyY29uZmlnL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL0ZhbmR5L2dvL3NyYy9leGNlbDJjb25maWcvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRMaXN0LCBkZWxldGVFeGNlbCwgdXBkYXRlRXhjZWwsIGFkZEV4Y2VsLCBleHBvcnRFeGNlbCwgZ2V0U2hlZXRMaXN0LCBleHBvcnRFeGNlbFByb2QgfSBmcm9tICdAL2FwaS9zaGVldCc7CmltcG9ydCB7IHNlYXJjaFVzZXIgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ3JvdXBVcGRhdGUsIGdyb3VwVGVzdENvbm5lY3Rpb24sIGdldENvbmZpZ0Zyb21EQiwgZXhwb3J0Q29uZmlnVG9EQiwgZ2VuZXJhdGVBcHBLZXlTZWNyZXQsIGdyb3VwQWRkLCBncm91cExpc3QsIHN5bmNUb1Byb2QsIGV4cG9ydFJlY29yZCwgZXhwb3J0UmVjb3JkQ29udGVudCwgZXhwb3J0Um9sbGJhY2sgfSBmcm9tICdAL2FwaS9ncm91cCc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZGVlcENsb25lIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCBDb2RlRGlmZiBmcm9tICd2dWUtY29kZS1kaWZmJzsKaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtdWknOwp2YXIgZGVmYXVsdEV4Y2VsID0gewogIGlkOiAnJywKICBuYW1lOiAnJywKICBvd25lcjogJycsCiAgcmVtYXJrOiAnJywKICBjcmVhdGVfdGltZTogJycsCiAgdXBkYXRlX3RpbWU6ICcnCn07CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb2RlRGlmZjogQ29kZURpZmYKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsndWlkJywgJ25hbWUnXSkpLAogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcjogZnVuY3Rpb24gc3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICB2YXIgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnZ3JheScsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdOwogICAgfSwKICAgIGRhdGVGaWx0ZXI6IGZ1bmN0aW9uIGRhdGVGaWx0ZXIoZGF0ZXRpbWUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KGRhdGV0aW1lKSAqIDEwMDApLnRvTG9jYWxlU3RyaW5nKCkucmVwbGFjZSgvOlxkezEsMn0kLywgJyAnKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBleGNlbDogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEV4Y2VsKSwKICAgICAgbGlzdDogW10sCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVHlwZTogJ25ldycsCiAgICAgIGV4cG9ydERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBleHBvcnRGb3JtYXQ6ICcnLAogICAgICBmb3JtOiB7fSwKICAgICAgZ3JvdXBJbmZvOiB7CiAgICAgICAgbmFtZTogIui0quWQg+ibh+Wkp+S9nOaImCIsCiAgICAgICAgcmVtYXJrOiAi6L+Z5piv6LSq5ZCD6JuH5aSn5L2c5oiYQXBw6aG555uuIiwKICAgICAgICBhdmF0YXI6IHJlcXVpcmUoIi4uLy4uL2ljb25zL3RhbmNoaXNoZS1pY29uLnBuZyIpLAogICAgICAgIHN0b3JlOiBbXSwKICAgICAgICBHcnBjQXBwS2V5OiAiIiwKICAgICAgICBHcnBjQXBwU2VjcmV0OiAiIiwKICAgICAgICBHcnBjRFNOOiAiIgogICAgICB9LAogICAgICBzdG9yZU9wdGlvbnM6IFt7CiAgICAgICAga2V5OiAxLAogICAgICAgIG5hbWU6ICJSZWRpcyIKICAgICAgfSwgewogICAgICAgIGtleTogMiwKICAgICAgICBuYW1lOiAiTXlzcWwiCiAgICAgIH0sIC8vIHtrZXk6ICJNb25nb2RiIiwgbmFtZTogIk1vbmdvZGIifSwKICAgICAgewogICAgICAgIGtleTogNCwKICAgICAgICBuYW1lOiAiRGF0YWJ1cyIKICAgICAgfV0sCiAgICAgIGFkZE1lbWJlcmRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzZWFyY2hVc2VyTmFtZTogIiIsCiAgICAgIHNlYXJjaFVpZDogIiIsCiAgICAgIGNvbXBhcmVWaXNhYmxlOiBmYWxzZSwKICAgICAgb2xkU3RyOiAnJywKICAgICAgbmV3U3RyOiAnJywKICAgICAgc2hlZXRMaXN0OiBbXSwKICAgICAgc2xlZWN0ZWRTaGVldDogJycsCiAgICAgIGV4cG9ydFByb2REaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZXhwb3J0UmVjb3JkRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlbGVjdFJlY29yZElkOiAnJywKICAgICAgcmVjb3JkTGlzdDogW10sCiAgICAgIGV4cG9ydFJlbWFyazogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5leGNlbC5vd25lciA9IHRoaXMubmFtZTsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgZ3JvdXBJbmZvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImdyb3VwSW5mbyIpOwogICAgICBncm91cEluZm8gPSBKU09OLnBhcnNlKGdyb3VwSW5mbyk7CiAgICAgIGNvbnNvbGUubG9nKGdyb3VwSW5mbyk7CgogICAgICBpZiAoZ3JvdXBJbmZvID09IG51bGwpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiLyIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChncm91cEluZm8uc3RvcmUgPT0gdW5kZWZpbmVkIHx8IGdyb3VwSW5mby5zdG9yZSA9PSBudWxsKSB7CiAgICAgICAgZ3JvdXBJbmZvLnN0b3JlID0gW107CiAgICAgIH0KCiAgICAgIHRoaXMuZ3JvdXBJbmZvID0gZ3JvdXBJbmZvOwogICAgICBnZXRMaXN0KHsKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgZ3JvdXBfaWQ6IGdyb3VwSW5mby5naWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5saXN0ICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgX3RoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDsKICAgICAgICB9CgogICAgICAgIF90aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUFkZEV4Y2VsOiBmdW5jdGlvbiBoYW5kbGVBZGRFeGNlbCgpIHsKICAgICAgdGhpcy5leGNlbCA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRFeGNlbCksIHRoaXMuZXhjZWwub3duZXIgPSB0aGlzLm5hbWU7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICduZXcnOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVN3aXRjaEVudjogZnVuY3Rpb24gaGFuZGxlU3dpdGNoRW52KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB0ZXh0ID0gIuW9k+WJjeWkhOS6juato+W8j+eOr+Wig++8jOaYr+WQpuehruiupOWIh+aNouWIsOa1i+ivleeOr+WigyI7CgogICAgICBpZiAodGhpcy5ncm91cEluZm8uSXNEZXYpIHsKICAgICAgICB0ZXh0ID0gIuW9k+WJjeWkhOS6jua1i+ivleeOr+Wig++8jOaYr+WQpuehruiupOWIh+aNouWIsOato+W8j+eOr+WigyI7CiAgICAgIH0KCiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSh0ZXh0LCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcyA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciB1bmlvbkdpZCA9IF90aGlzMi5ncm91cEluZm8uVW5pb25Hcm91cElkOwogICAgICAgIGdyb3VwTGlzdCh1bmlvbkdpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpczIuZ3JvdXBJbmZvID0gcmVzcG9uc2UuZGF0YS5saXN0WzBdOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZ3JvdXBJbmZvIiwgSlNPTi5zdHJpbmdpZnkoX3RoaXMyLmdyb3VwSW5mbykpOyAvLyByZWZyZXNoIAoKICAgICAgICAgICAgdmFyIHBhdGggPSBfdGhpczIuJHJvdXRlLnBhdGg7CgogICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBwYXRoOiBwYXRoLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICB0OiArbmV3IERhdGUoKSAvL+S/neivgeavj+asoeeCueWHu+i3r+eUseeahHF1ZXJ56aG56YO95piv5LiN5LiA5qC355qE77yM56Gu5L+d5Lya6YeN5paw5Yi35pawdmlldwoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMyLmZldGNoRGF0YSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtRXhjZWw6IGZ1bmN0aW9uIGNvbmZpcm1FeGNlbCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBpc0VkaXQsIGluZGV4LCBwYXJhbXMsIF95aWVsZCRhZGRFeGNlbCwgZGF0YSwgdGltZXN0YW1wLCBfdGhpczMkZXhjZWwsIGlkLCBuYW1lLCByZW1hcms7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMy5leGNlbC5uYW1lLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWQjeensCcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpc0VkaXQgPSBfdGhpczMuZGlhbG9nVHlwZSA9PT0gJ2VkaXQnOwoKICAgICAgICAgICAgICAgIGlmICghaXNFZGl0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRXhjZWwoX3RoaXMzLmV4Y2VsKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaW5kZXggPSAwOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBpZiAoIShpbmRleCA8IF90aGlzMy5saXN0Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczMubGlzdFtpbmRleF0uaWQgPT09IF90aGlzMy5leGNlbC5pZCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMubGlzdC5zcGxpY2UoaW5kZXgsIDEsIE9iamVjdC5hc3NpZ24oe30sIF90aGlzMy5leGNlbCkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMTUpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIHBhcmFtcyA9IF90aGlzMy5leGNlbDsKICAgICAgICAgICAgICAgIHBhcmFtcy51aWQgPSBfdGhpczMudWlkOwogICAgICAgICAgICAgICAgcGFyYW1zLmdyb3VwX2lkID0gX3RoaXMzLmdyb3VwSW5mby5naWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICByZXR1cm4gYWRkRXhjZWwocGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF95aWVsZCRhZGRFeGNlbCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGFkZEV4Y2VsLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczMuZXhjZWwuaWQgPSBkYXRhLmVpZDsKICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgX3RoaXMzLmV4Y2VsLmNyZWF0ZVRpbWUgPSB0aW1lc3RhbXAgLyAxMDAwOwogICAgICAgICAgICAgICAgX3RoaXMzLmV4Y2VsLmVkaXRUaW1lID0gdGltZXN0YW1wIC8gMTAwMDsKCiAgICAgICAgICAgICAgICBfdGhpczMubGlzdC5wdXNoKF90aGlzMy5leGNlbCk7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICBfdGhpczMkZXhjZWwgPSBfdGhpczMuZXhjZWwsIGlkID0gX3RoaXMzJGV4Y2VsLmlkLCBuYW1lID0gX3RoaXMzJGV4Y2VsLm5hbWUsIHJlbWFyayA9IF90aGlzMyRleGNlbC5yZW1hcms7CiAgICAgICAgICAgICAgICBfdGhpczMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIF90aGlzMy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiXG4gICAgICAgICAgICA8ZGl2Plx1NTQwRFx1NzlGMDogIi5jb25jYXQobmFtZSwgIjwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cdTU5MDdcdTZDRTg6ICIpLmNvbmNhdChyZW1hcmssICI8L2Rpdj5cbiAgICAgICAgICAiKSwKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbiBoYW5kbGVFZGl0KHNjb3BlKSB7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICdlZGl0JzsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jaGVja1N0cmljdGx5ID0gdHJ1ZTsKICAgICAgdGhpcy5leGNlbCA9IGRlZXBDbG9uZShzY29wZS5yb3cpOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKF9yZWYpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgJGluZGV4ID0gX3JlZi4kaW5kZXgsCiAgICAgICAgICByb3cgPSBfcmVmLnJvdzsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5Yig6Zmk6KGo5qC85ZCXPycsICdXYXJuaW5nJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVFeGNlbCh7CiAgICAgICAgICAgICAgICAgIGlkOiByb3cuaWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IHJvdy5uYW1lCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXM0Lmxpc3Quc3BsaWNlKCRpbmRleCwgMSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUV4cG9ydDogZnVuY3Rpb24gaGFuZGxlRXhwb3J0KHNjb3BlKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5leGNlbCA9IGRlZXBDbG9uZShzY29wZS5yb3cpOwogICAgICB0aGlzLmV4cG9ydERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLnNoZWV0TGlzdCA9IFtdOwogICAgICB0aGlzLm9sZFN0ciA9ICcnOwogICAgICB0aGlzLm5ld1N0ciA9ICcnOwogICAgICB0aGlzLmV4cG9ydFJlbWFyayA9ICcnOwogICAgICBnZXRTaGVldExpc3QoewogICAgICAgIGdyaWRLZXk6IHRoaXMuZXhjZWwuaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAwKSB7CiAgICAgICAgICBfdGhpczUuc2hlZXRMaXN0ID0gcmVzcG9uc2UuZGF0YS5zaGVldE5hbWU7CiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczUuc2hlZXRMaXN0KTsKCiAgICAgICAgICBpZiAoX3RoaXM1LnNoZWV0TGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIF90aGlzNS5zbGVlY3RlZFNoZWV0ID0gX3RoaXM1LnNoZWV0TGlzdFswXTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczUuZ2V0RXhjZWxTaGVldENvbnRlbnQoX3RoaXM1LmV4Y2VsLmlkLCBfdGhpczUuc2xlZWN0ZWRTaGVldCk7CgogICAgICAgICAgX3RoaXM1LmdldEV4Y2VsU2hlZXRGcm9tREIoX3RoaXM1LmV4Y2VsLmlkLCBfdGhpczUuc2xlZWN0ZWRTaGVldCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVFeHBvcnRQcm9kOiBmdW5jdGlvbiBoYW5kbGVFeHBvcnRQcm9kKHNjb3BlKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5leGNlbCA9IGRlZXBDbG9uZShzY29wZS5yb3cpOwogICAgICB0aGlzLmV4cG9ydFByb2REaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zaGVldExpc3QgPSBbXTsKICAgICAgdGhpcy5vbGRTdHIgPSAnJzsKICAgICAgdGhpcy5uZXdTdHIgPSAnJzsKICAgICAgZ2V0U2hlZXRMaXN0KHsKICAgICAgICBncmlkS2V5OiB0aGlzLmV4Y2VsLmlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMCkgewogICAgICAgICAgX3RoaXM2LnNoZWV0TGlzdCA9IHJlc3BvbnNlLmRhdGEuc2hlZXROYW1lOwogICAgICAgICAgY29uc29sZS5sb2coX3RoaXM2LnNoZWV0TGlzdCk7CgogICAgICAgICAgaWYgKF90aGlzNi5zaGVldExpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpczYuc2xlZWN0ZWRTaGVldCA9IF90aGlzNi5zaGVldExpc3RbMF07CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM2LmdldEV4Y2VsU2hlZXRDb250ZW50KF90aGlzNi5leGNlbC5pZCwgX3RoaXM2LnNsZWVjdGVkU2hlZXQpOwoKICAgICAgICAgIF90aGlzNi5nZXRFeGNlbFNoZWV0RnJvbVByb2QoX3RoaXM2LmV4Y2VsLmlkLCBfdGhpczYuc2xlZWN0ZWRTaGVldCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVFeHBvcnRSZWNvcmQ6IGZ1bmN0aW9uIGhhbmRsZUV4cG9ydFJlY29yZChzY29wZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRoaXMuZXhjZWwgPSBkZWVwQ2xvbmUoc2NvcGUucm93KTsKICAgICAgdGhpcy5leHBvcnRSZWNvcmREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zaGVldExpc3QgPSBbXTsKICAgICAgdGhpcy5leHBvcnRSZWNvcmQgPSBbXTsKICAgICAgdGhpcy5vbGRTdHIgPSAnJzsKICAgICAgdGhpcy5uZXdTdHIgPSAnJzsKICAgICAgZ2V0U2hlZXRMaXN0KHsKICAgICAgICBncmlkS2V5OiB0aGlzLmV4Y2VsLmlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMCkgewogICAgICAgICAgX3RoaXM3LnNoZWV0TGlzdCA9IHJlc3BvbnNlLmRhdGEuc2hlZXROYW1lOwogICAgICAgICAgY29uc29sZS5sb2coX3RoaXM3LnNoZWV0TGlzdCk7CgogICAgICAgICAgaWYgKF90aGlzNy5zaGVldExpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpczcuc2xlZWN0ZWRTaGVldCA9IF90aGlzNy5zaGVldExpc3RbMF07CiAgICAgICAgICB9IC8v6I635Y+WcmVjb3JkIGxpc3QKCgogICAgICAgICAgX3RoaXM3LmdldFJlY29yZExpc3QoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldFJlY29yZExpc3Q6IGZ1bmN0aW9uIGdldFJlY29yZExpc3QoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgZXhwb3J0UmVjb3JkKHsKICAgICAgICBncmlkS2V5OiB0aGlzLmV4Y2VsLmlkLAogICAgICAgIHNoZWV0TmFtZTogdGhpcy5zbGVlY3RlZFNoZWV0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcC5kYXRhICE9IG51bGwpIHsKICAgICAgICAgIF90aGlzOC5yZWNvcmRMaXN0ID0gcmVzcC5kYXRhLmxpc3Q7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXM4LnJlY29yZExpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgX3RoaXM4LnNlbGVjdFJlY29yZElkID0gX3RoaXM4LnJlY29yZExpc3RbMF0uaWQ7CiAgICAgICAgfQoKICAgICAgICBfdGhpczgucmVmcmVzaFJlY29yZENvbnRlbnQoKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaFJlY29yZENvbnRlbnQ6IGZ1bmN0aW9uIHJlZnJlc2hSZWNvcmRDb250ZW50KCkgewogICAgICB2YXIgbGFzdFJlY29yZElkID0gJyc7IC8vIOWIpOaWreaYr+WQpuacieS4iuS4gOS4qnJlY29yZAoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlY29yZExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5yZWNvcmRMaXN0W2ldLmlkID09IHRoaXMuc2VsZWN0UmVjb3JkSWQpIHsKICAgICAgICAgIGlmIChpICsgMSA8IHRoaXMucmVjb3JkTGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coInJlY29yZO+8miIsIHRoaXMucmVjb3JkTGlzdFtpICsgMV0pOwogICAgICAgICAgICBsYXN0UmVjb3JkSWQgPSB0aGlzLnJlY29yZExpc3RbaSArIDFdLmlkOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0RnJvbVJlY29yZCh0aGlzLmV4Y2VsLmlkLCB0aGlzLnNsZWVjdGVkU2hlZXQsIHRoaXMuc2VsZWN0UmVjb3JkSWQpOwogICAgICB0aGlzLmdldEV4Y2VsU2hlZXRGcm9tUmVjb3JkKHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCwgbGFzdFJlY29yZElkKTsKICAgIH0sCiAgICBnZXRFeGNlbFNoZWV0Q29udGVudDogZnVuY3Rpb24gZ2V0RXhjZWxTaGVldENvbnRlbnQoZ3JpZEtleSwgc2hlZXROYW1lKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHBhcmFtcywgX3lpZWxkJGV4cG9ydEV4Y2VsLCBkYXRhLCBqc29uT2JqOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM5Lm5ld1N0ciA9ICIiOwogICAgICAgICAgICAgICAgcGFyYW1zID0ge307CiAgICAgICAgICAgICAgICBwYXJhbXMuZ3JpZEtleSA9IGdyaWRLZXk7CiAgICAgICAgICAgICAgICBwYXJhbXMuc2hlZXROYW1lID0gc2hlZXROYW1lOwogICAgICAgICAgICAgICAgcGFyYW1zLmZvcm1hdCA9ICdqc29uJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBleHBvcnRFeGNlbChwYXJhbXMpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfeWllbGQkZXhwb3J0RXhjZWwgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkZXhwb3J0RXhjZWwuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5qc29uc3RyICE9IHVuZGVmaW5lZCAmJiBkYXRhLmpzb25zdHIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBqc29uT2JqID0gSlNPTi5wYXJzZShkYXRhLmpzb25zdHIpOwogICAgICAgICAgICAgICAgICBfdGhpczkubmV3U3RyID0gSlNPTi5zdHJpbmdpZnkoanNvbk9iaiwgbnVsbCwgIiAiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEV4Y2VsU2hlZXRGcm9tREI6IGZ1bmN0aW9uIGdldEV4Y2VsU2hlZXRGcm9tREIoZ3JpZEtleSwgc2hlZXROYW1lKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBwYXJhbXMsIF95aWVsZCRnZXRDb25maWdGcm9tRCwgZGF0YSwganNvbk9iajsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTAub2xkU3RyID0gIiI7CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmFtcy5ncmlkS2V5ID0gZ3JpZEtleTsKICAgICAgICAgICAgICAgIHBhcmFtcy5zaGVldE5hbWUgPSBzaGVldE5hbWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29uZmlnRnJvbURCKHBhcmFtcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF95aWVsZCRnZXRDb25maWdGcm9tRCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRnZXRDb25maWdGcm9tRC5kYXRhOwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLmpzb25zdHIgIT0gdW5kZWZpbmVkICYmIGRhdGEuanNvbnN0ci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIGpzb25PYmogPSBKU09OLnBhcnNlKGRhdGEuanNvbnN0cik7CiAgICAgICAgICAgICAgICAgIF90aGlzMTAub2xkU3RyID0gSlNPTi5zdHJpbmdpZnkoanNvbk9iaiwgbnVsbCwgIiAiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0RXhjZWxTaGVldEZyb21Qcm9kOiBmdW5jdGlvbiBnZXRFeGNlbFNoZWV0RnJvbVByb2QoZ3JpZEtleSwgc2hlZXROYW1lKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBwYXJhbXMsIF95aWVsZCRleHBvcnRFeGNlbFBybywgZGF0YSwganNvbk9iajsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTEub2xkU3RyID0gIiI7CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmFtcy5ncmlkS2V5ID0gZ3JpZEtleTsKICAgICAgICAgICAgICAgIHBhcmFtcy5zaGVldE5hbWUgPSBzaGVldE5hbWU7CiAgICAgICAgICAgICAgICBwYXJhbXMuZm9ybWF0ID0gJ2pzb24nOwogICAgICAgICAgICAgICAgcGFyYW1zLmdpZCA9IF90aGlzMTEuZ3JvdXBJbmZvLmdpZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBleHBvcnRFeGNlbFByb2QocGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3lpZWxkJGV4cG9ydEV4Y2VsUHJvID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGV4cG9ydEV4Y2VsUHJvLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuanNvbnN0ciAhPSB1bmRlZmluZWQgJiYgZGF0YS5qc29uc3RyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAganNvbk9iaiA9IEpTT04ucGFyc2UoZGF0YS5qc29uc3RyKTsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS5vbGRTdHIgPSBKU09OLnN0cmluZ2lmeShqc29uT2JqLCBudWxsLCAiICIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0RXhjZWxTaGVldEZyb21SZWNvcmQ6IGZ1bmN0aW9uIGdldEV4Y2VsU2hlZXRGcm9tUmVjb3JkKGdyaWRLZXksIHNoZWV0TmFtZSwgcmVjb3JkSWQpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHBhcmFtcywgX3lpZWxkJGV4cG9ydFJlY29yZENvLCBkYXRhLCBqc29uT2JqOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHJlY29yZElkID09IF90aGlzMTIuc2VsZWN0UmVjb3JkSWQpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi5uZXdTdHIgPSAiIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTIub2xkU3RyID0gIiI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEocmVjb3JkSWQubGVuZ3RoID09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmFtcy5ncmlkS2V5ID0gZ3JpZEtleTsKICAgICAgICAgICAgICAgIHBhcmFtcy5zaGVldE5hbWUgPSBzaGVldE5hbWU7CiAgICAgICAgICAgICAgICBwYXJhbXMucmVjb3JkSWQgPSByZWNvcmRJZDsKICAgICAgICAgICAgICAgIHBhcmFtcy5mb3JtYXQgPSAnanNvbic7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIGV4cG9ydFJlY29yZENvbnRlbnQocGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF95aWVsZCRleHBvcnRSZWNvcmRDbyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRleHBvcnRSZWNvcmRDby5kYXRhOwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLmpzb25zdHIgIT0gdW5kZWZpbmVkICYmIGRhdGEuanNvbnN0ci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIGpzb25PYmogPSBKU09OLnBhcnNlKGRhdGEuanNvbnN0cik7CgogICAgICAgICAgICAgICAgICBpZiAocmVjb3JkSWQgPT0gX3RoaXMxMi5zZWxlY3RSZWNvcmRJZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMTIubmV3U3RyID0gSlNPTi5zdHJpbmdpZnkoanNvbk9iaiwgbnVsbCwgIiAiKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczEyLm9sZFN0ciA9IEpTT04uc3RyaW5naWZ5KGpzb25PYmosIG51bGwsICIgIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhhbmRsZVJvbGxCYWNrOiBmdW5jdGlvbiBoYW5kbGVSb2xsQmFjaygpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgdmFyIHRleHQgPSAi5oKo5b2T5YmN6YCJ5oup55qE6YWN572u6KGo5pivIFwiIiArIHRoaXMuc2xlZWN0ZWRTaGVldCArICJcIiwg56Gu6K6k6KaB5Zue6YCA54mI5pys5ZCX77yfIjsKICAgICAgTWVzc2FnZUJveC5jb25maXJtKHRleHQsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzID09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHBhcmFtcyA9IHt9OwogICAgICAgIHBhcmFtcy5ncmlkS2V5ID0gX3RoaXMxMy5leGNlbC5pZDsKICAgICAgICBwYXJhbXMuc2hlZXROYW1lID0gX3RoaXMxMy5zbGVlY3RlZFNoZWV0OwogICAgICAgIHBhcmFtcy5yZWNvcmRJZCA9IF90aGlzMTMuc2VsZWN0UmVjb3JkSWQ7CiAgICAgICAgZXhwb3J0Um9sbGJhY2socGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gMCkgewogICAgICAgICAgICBfdGhpczEzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5Zue6YCA5aSx6LSlJywKICAgICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tc2csCiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMTMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICflm57pgIDmiJDlip8nLAogICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpczEzLmV4cG9ydFJlY29yZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgb25TZWxlY3RlZFNoZWV0Q2hhbmdlOiBmdW5jdGlvbiBvblNlbGVjdGVkU2hlZXRDaGFuZ2UoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKCiAgICAgIGlmIChlID09IDEpIHsKICAgICAgICAvLyDlj5HluIPlvLnnqpcKICAgICAgICB0aGlzLmdldEV4Y2VsU2hlZXRDb250ZW50KHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCk7CiAgICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0RnJvbURCKHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCk7CiAgICAgIH0gZWxzZSBpZiAoZSA9PSAyKSB7CiAgICAgICAgLy8g5ZCM5q2l5by556qXCiAgICAgICAgdGhpcy5nZXRFeGNlbFNoZWV0Q29udGVudCh0aGlzLmV4Y2VsLmlkLCB0aGlzLnNsZWVjdGVkU2hlZXQpOwogICAgICAgIHRoaXMuZ2V0RXhjZWxTaGVldEZyb21Qcm9kKHRoaXMuZXhjZWwuaWQsIHRoaXMuc2xlZWN0ZWRTaGVldCk7CiAgICAgIH0gZWxzZSBpZiAoZSA9PSAzKSB7CiAgICAgICAgLy/lj5HluIPorrDlvZXlvLnnqpcKICAgICAgICB0aGlzLnNlbGVjdFJlY29yZElkID0gJyc7CiAgICAgICAgdGhpcy5uZXdTdHIgPSAnJzsKICAgICAgICB0aGlzLm9sZFN0ciA9ICcnOwogICAgICAgIHRoaXMucmVjb3JkTGlzdCA9IFtdOwogICAgICAgIHRoaXMuZ2V0UmVjb3JkTGlzdCgpOwogICAgICB9CiAgICB9LAogICAgb25TZWxlY3RSZWNvcmRDaGFuZ2U6IGZ1bmN0aW9uIG9uU2VsZWN0UmVjb3JkQ2hhbmdlKGUpIHsKICAgICAgY29uc29sZS5sb2coInNlbGVjdCByZWNvcmQgY2hhbmdlZCIpOwogICAgICB0aGlzLnJlZnJlc2hSZWNvcmRDb250ZW50KCk7CiAgICB9LAogICAgY29uZmlybUV4cG9ydDogZnVuY3Rpb24gY29uZmlybUV4cG9ydCgpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuZXhwb3J0UmVtYXJrLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAn5Y+R5biD5aSx6LSlJywKICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7floavlhpnlj5HluIPlhoXlrrkiLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRleHQgPSAi5oKo5b2T5YmN6YCJ5oup55qE6YWN572u6KGo5pivIFwiIiArIHRoaXMuc2xlZWN0ZWRTaGVldCArICJcIiwg5L+u5pS55aSH5rOo5Li6IFwiIiArIHRoaXMuZXhwb3J0UmVtYXJrICsgIlwiLCDnoa7orqTlj5HluIPlkJfvvJ8iOwoKICAgICAgaWYgKCF0aGlzLmdyb3VwSW5mby5Jc0RldikgewogICAgICAgIHRleHQgPSAi5b2T5YmN5aSE5LqO5q2j5byP546v5aKDLCAiICsgdGV4dDsKICAgICAgfQoKICAgICAgTWVzc2FnZUJveC5jb25maXJtKHRleHQsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgcGFyYW1zID0ge307CiAgICAgICAgcGFyYW1zLmdyaWRLZXkgPSBfdGhpczE0LmV4Y2VsLmlkOwogICAgICAgIHBhcmFtcy5zaGVldE5hbWUgPSBfdGhpczE0LnNsZWVjdGVkU2hlZXQ7CiAgICAgICAgcGFyYW1zLnJlbWFyayA9IF90aGlzMTQuZXhwb3J0UmVtYXJrOwogICAgICAgIGV4cG9ydENvbmZpZ1RvREIocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMCkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxNC4kbm90aWZ5KHsKICAgICAgICAgICAgICAgIHRpdGxlOiAn5Y+R5biD5aSx6LSlJywKICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzMTQuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+WPkeW4g+aIkOWKnycsCiAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpczE0LmV4cG9ydERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtRXhwb3J0UHJvZDogZnVuY3Rpb24gY29uZmlybUV4cG9ydFByb2QoKSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKCiAgICAgIHZhciBwYXJhbXMgPSB7fTsKICAgICAgcGFyYW1zLmdyaWRLZXkgPSB0aGlzLmV4Y2VsLmlkOwogICAgICBwYXJhbXMuc2hlZXROYW1lID0gdGhpcy5zbGVlY3RlZFNoZWV0OwogICAgICBwYXJhbXMuZ2lkID0gdGhpcy5ncm91cEluZm8uZ2lkOwogICAgICBzeW5jVG9Qcm9kKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAwKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIF90aGlzMTUuJG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICflkIzmraXlpLHotKUnLAogICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1zZywKICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMxNS4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+WQjOatpeaIkOWKnycsCiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMTUuZXhwb3J0UHJvZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVHcm91cENvbmZpZzogZnVuY3Rpb24gc2F2ZUdyb3VwQ29uZmlnKCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICBncm91cFVwZGF0ZSh7CiAgICAgICAgaWQ6IHRoaXMuZ3JvdXBJbmZvLmdpZCwKICAgICAgICBncm91cEluZm86IHRoaXMuZ3JvdXBJbmZvCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gMCkgewogICAgICAgICAgX3RoaXMxNi4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxNi4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjmiJDlip8nLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJncm91cEluZm8iLCBKU09OLnN0cmluZ2lmeShfdGhpczE2Lmdyb3VwSW5mbykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBsb2FkQXZhdGFyOiBmdW5jdGlvbiB1cGxvYWRBdmF0YXIoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlczsKCiAgICAgIGlmICh0aGlzLmNoZWNrRmlsZShmaWxlc1swXSkpIHsKICAgICAgICB0aGlzLnNldFNvdXJjZUltZyhmaWxlc1swXSk7CiAgICAgIH0KICAgIH0sCgogICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIC8vIOajgOa1i+mAieaLqeeahOaWh+S7tuaYr+WQpuWQiOmAggogICAgY2hlY2tGaWxlOiBmdW5jdGlvbiBjaGVja0ZpbGUoZmlsZSkgewogICAgICB2YXIgbGFuZyA9IHRoaXMubGFuZywKICAgICAgICAgIG1heFNpemUgPSB0aGlzLm1heFNpemU7IC8vIOS7hemZkOWbvueJhwoKICAgICAgaWYgKGZpbGUudHlwZS5pbmRleE9mKCdpbWFnZScpID09PSAtMSkgewogICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNc2cgPSBsYW5nLmVycm9yLm9ubHlJbWc7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIOi2heWHuuWkp+WwjwoKCiAgICAgIGlmIChmaWxlLnNpemUgLyAxMDI0ID4gbWF4U2l6ZSkgewogICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNc2cgPSBsYW5nLmVycm9yLm91dE9mU2l6ZSArIG1heFNpemUgKyAna2InOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgc2V0U291cmNlSW1nOiBmdW5jdGlvbiBzZXRTb3VyY2VJbWcoZmlsZSkgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CgogICAgICB2YXIgZnIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgZnIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczE3Lmdyb3VwSW5mby5hdmF0YXIgPSBmci5yZXN1bHQ7CiAgICAgIH07CgogICAgICBmci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgfSwKICAgIGluQXJyYXk6IGZ1bmN0aW9uIGluQXJyYXkoYXJyLCB0YXJnZXQpIHsKICAgICAgZm9yICh2YXIgaSBpbiBhcnIpIHsKICAgICAgICBpZiAoYXJyW2ldID09IHRhcmdldCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgdGVzdFJlZGlzQ29ubmVjdGlvbjogZnVuY3Rpb24gdGVzdFJlZGlzQ29ubmVjdGlvbihlKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgZHNuVHlwZTogMSwKICAgICAgICBkc246IHRoaXMuZ3JvdXBJbmZvLlJlZGlzRFNOLAogICAgICAgIHB3ZDogdGhpcy5ncm91cEluZm8uUmVkaXNQYXNzd29yZAogICAgICB9OwogICAgICBncm91cFRlc3RDb25uZWN0aW9uKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gMCB8fCByZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIF90aGlzMTguJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnUmVkaXPov57mjqXlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJcdThCRjdcdTY4QzBcdTY3RTVEU05cdTkxNERcdTdGNkVcdTYyMTZcdTgwMDVJUFx1NzY3RFx1NTQwRFx1NTM1NVx1OTE0RFx1N0Y2RSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxOC4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdSZWRpc+i/nuaOpeaIkOWKnycsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIiIsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0ZXN0TXlzcWxDb25uZWN0aW9uOiBmdW5jdGlvbiB0ZXN0TXlzcWxDb25uZWN0aW9uKCkgewogICAgICB2YXIgX3RoaXMxOSA9IHRoaXM7CgogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIGRzblR5cGU6IDIsCiAgICAgICAgZHNuOiB0aGlzLmdyb3VwSW5mby5NeXNxbERTTgogICAgICB9OwogICAgICBncm91cFRlc3RDb25uZWN0aW9uKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gMCB8fCByZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIF90aGlzMTkuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnTXlzcWzov57mjqXlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJcdThCRjdcdTY4QzBcdTY3RTVEU05cdTkxNERcdTdGNkVcdTYyMTZcdTgwMDVJUFx1NzY3RFx1NTQwRFx1NTM1NVx1OTE0RFx1N0Y2RSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxOS4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdNeXNxbOi/nuaOpeaIkOWKnycsCiAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIiIsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0ZXN0R1JwY0Nvbm5lY3Rpb246IGZ1bmN0aW9uIHRlc3RHUnBjQ29ubmVjdGlvbigpIHsKICAgICAgdmFyIF90aGlzMjAgPSB0aGlzOwoKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBkc25UeXBlOiA0LAogICAgICAgIGRzbjogdGhpcy5ncm91cEluZm8uR3JwY0RTTiwKICAgICAgICBhcHBLZXk6IHRoaXMuZ3JvdXBJbmZvLkdycGNBcHBLZXksCiAgICAgICAgYXBwU2VjcmV0OiB0aGlzLmdyb3VwSW5mby5HcnBjQXBwU2VjcmV0CiAgICAgIH07CiAgICAgIGdyb3VwVGVzdENvbm5lY3Rpb24ocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvbm5lY3RlZCA9PSAwIHx8IHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkID09IHVuZGVmaW5lZCkgewogICAgICAgICAgX3RoaXMyMC4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdEYXRhYnVz6L+e5o6l5aSx6LSlJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiXHU4QkY3XHU1NDJGXHU1MkE4RGF0YWJ1c1x1NjcwRFx1NTJBMVx1RkYwQ1x1NjhDMFx1NjdFNURTTlx1NTQ4Q0FwcEtleVx1MzAwMUFwcFNlY3JldFx1OTE0RFx1N0Y2RSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyMC4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdEYXRhYnVz6L+e5o6l5oiQ5YqfJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdlbmVyYXRlQXBwS2V5U2VjcmV0SGFuZGxlcjogZnVuY3Rpb24gZ2VuZXJhdGVBcHBLZXlTZWNyZXRIYW5kbGVyKCkgewogICAgICB2YXIgX3RoaXMyMSA9IHRoaXM7CgogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBnZW5lcmF0ZUFwcEtleVNlY3JldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gbnVsbCB8fCByZXNwb25zZS5kYXRhLmFwcEtleSA9PSAiIiB8fCByZXNwb25zZS5kYXRhLmFwcFNlY3JldCA9PSAiIikgewogICAgICAgICAgX3RoaXMyMS4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfojrflj5blpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJcdThCRjdcdTgwNTRcdTdDRkJcdTdCQTFcdTc0MDZcdTU0NTgiLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMjEuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn6I635Y+W5oiQ5YqfJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiXHU4QkY3XHU1M0MyXHU5NjA1XHU2NTg3XHU2ODYzXHU2NDJEXHU1RUZBZTJjZGF0YWJ1c1x1NjcwRFx1NTJBMVx1NTY2OCIsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMyMS5ncm91cEluZm8uR3JwY0RTTiA9ICIiOwogICAgICAgICAgX3RoaXMyMS5ncm91cEluZm8uR3JwY0FwcEtleSA9IHJlc3BvbnNlLmRhdGEuYXBwS2V5OwogICAgICAgICAgX3RoaXMyMS5ncm91cEluZm8uR3JwY0FwcFNlY3JldCA9IHJlc3BvbnNlLmRhdGEuYXBwU2VjcmV0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdGVzdE1vbmdvZGJDb25uZWN0aW9uOiBmdW5jdGlvbiB0ZXN0TW9uZ29kYkNvbm5lY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpczIyID0gdGhpczsKCiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgZHNuVHlwZTogMywKICAgICAgICBkc246IHRoaXMuZ3JvdXBJbmZvLk1vbmdvZGJEU04KICAgICAgfTsKICAgICAgZ3JvdXBUZXN0Q29ubmVjdGlvbihwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkID09IDAgfHwgcmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBfdGhpczIyLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ01vbmdvZGLov57mjqXlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJcdThCRjdcdTY4QzBcdTY3RTVEU05cdTkxNERcdTdGNkVcdTYyMTZcdTgwMDVJUFx1NzY3RFx1NTQwRFx1NTM1NVx1OTE0RFx1N0Y2RSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyMi4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdNb25nb2Ri6L+e5o6l5oiQ5YqfJywKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dEZWxldGVNZW1iZXI6IGZ1bmN0aW9uIHNob3dEZWxldGVNZW1iZXIoc2NvcGUpIHsKICAgICAgaWYgKHRoaXMuZ3JvdXBJbmZvLm93bmVyID09IHRoaXMudWlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBJbmZvLm93bmVyICE9IHNjb3BlLnJvdy51aWQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVBZGRNZW1iZXI6IGZ1bmN0aW9uIGhhbmRsZUFkZE1lbWJlcigpIHsKICAgICAgdGhpcy5hZGRNZW1iZXJkaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBhZGRNZW1iZXI6IGZ1bmN0aW9uIGFkZE1lbWJlcigpIHsKICAgICAgdmFyIF90aGlzMjMgPSB0aGlzOwoKICAgICAgdmFyIGV4aXN0ID0gZmFsc2U7CiAgICAgIHRoaXMuZ3JvdXBJbmZvLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgIGlmIChtLnVpZCA9PSBfdGhpczIzLnNlYXJjaFVpZCkgewogICAgICAgICAgZXhpc3QgPSB0cnVlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoZXhpc3QpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICfmt7vliqDlpLHotKUnLAogICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIlx1NjIxMFx1NTQ1OFx1NURGMlx1NUI1OFx1NTcyOCIsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmdyb3VwSW5mby5tZW1iZXJzLnB1c2goewogICAgICAgIHVpZDogdGhpcy5zZWFyY2hVaWQsCiAgICAgICAgdXNlck5hbWU6IHRoaXMuc2VhcmNoVXNlck5hbWUKICAgICAgfSk7CiAgICAgIHRoaXMudXBkYXRlR3JvdXBJbmZvKCLkv53lrZjmiJDlip8iLCAi5re75Yqg5oiQ5ZGY77yaIiArIHRoaXMuc2VhcmNoVXNlck5hbWUpOwogICAgICB0aGlzLmFkZE1lbWJlcmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Q6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdChlKSB7CiAgICAgIHRoaXMuc2VhcmNoVWlkID0gZS5pZDsKICAgIH0sCiAgICBoYW5kbGVEZWxldGVNZW1iZXI6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZU1lbWJlcihzY29wZSkgewogICAgICB2YXIgbWVtYmVycyA9IFtdOwogICAgICB0aGlzLmdyb3VwSW5mby5tZW1iZXJzLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKICAgICAgICBpZiAobS51aWQgIT0gc2NvcGUucm93LnVpZCkgewogICAgICAgICAgbWVtYmVycy5wdXNoKG0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZ3JvdXBJbmZvLm1lbWJlcnMgPSBtZW1iZXJzOwogICAgICB0aGlzLnVwZGF0ZUdyb3VwSW5mbygi5L+d5a2Y5oiQ5YqfIiwgIuWIoOmZpOaIkOWRmO+8miIgKyBzY29wZS5yb3cudXNlck5hbWUpOwogICAgfSwKICAgIHVwZGF0ZUdyb3VwSW5mbzogZnVuY3Rpb24gdXBkYXRlR3JvdXBJbmZvKHN1Y2NUaXRsZSwgc3Vzc01zZykgewogICAgICB2YXIgX3RoaXMyNCA9IHRoaXM7CgogICAgICBncm91cFVwZGF0ZSh7CiAgICAgICAgaWQ6IHRoaXMuZ3JvdXBJbmZvLmdpZCwKICAgICAgICBncm91cEluZm86IHRoaXMuZ3JvdXBJbmZvCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gMCkgewogICAgICAgICAgX3RoaXMyNC4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjlpLHotKUnLAogICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyNC4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6IHN1Y2NUaXRsZSwKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBzdXNzTXNnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJncm91cEluZm8iLCBKU09OLnN0cmluZ2lmeShfdGhpczI0Lmdyb3VwSW5mbykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcXVlcnlTZWFyY2hBc3luYzogZnVuY3Rpb24gcXVlcnlTZWFyY2hBc3luYyhxdWVyeVN0cmluZywgY2IpIHsKICAgICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgICAgdGhpcy5zZWFyY2hVaWQgPSAiIjsKCiAgICAgIGlmIChxdWVyeVN0cmluZyA9PSAiIikgewogICAgICAgIGNiKHJlc3VsdHMpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc2VhcmNoVXNlcih7CiAgICAgICAgbmFtZTogdGhpcy5zZWFyY2hVc2VyTmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnVzZXJJbmZvcyA9PSB1bmRlZmluZWQgfHwgcmVzcG9uc2UuZGF0YS51c2VySW5mb3MgPT0gbnVsbCkgewogICAgICAgICAgY2IocmVzdWx0cyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXNwb25zZS5kYXRhLnVzZXJJbmZvcy5mb3JFYWNoKGZ1bmN0aW9uICh1KSB7CiAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICAiaWQiOiB1LnVpZCwKICAgICAgICAgICAgInZhbHVlIjogdS51c2VyTmFtZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7CiAgICAgICAgY2IocmVzdWx0cyk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},null]}